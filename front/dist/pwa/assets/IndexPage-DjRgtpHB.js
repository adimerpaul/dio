import{_ as h,Y as p,c as f,o as i,w as a,b as s,a as o,a0 as d,a1 as u,a2 as b,Q as c,t as l,e as _}from"./index-DpunrW0G.js";import{Q as x}from"./QPage-2HawpGZ7.js";import{m as g}from"./vue3-apexcharts-BIffVarc.js";const v={name:"IndexPage",components:{apexchart:g},data(){return{loading:!1,totales:{},esteMes:{},series:{labels:[],casos:[],prob:[],ses:[],inf:[]}}},computed:{cards(){return[{key:"casos",label:"Casos",value:this.totales.casos,mes:this.esteMes.casos},{key:"prob",label:"Problemáticas",value:this.totales.problematicas,mes:this.esteMes.problematicas},{key:"ses",label:"Sesiones",value:this.totales.sesiones,mes:this.esteMes.sesiones},{key:"inf",label:"Informes",value:this.totales.informes,mes:this.esteMes.informes}]},areaOptions(){return{chart:{toolbar:{show:!1}},stroke:{curve:"smooth",width:2},dataLabels:{enabled:!1},xaxis:{categories:this.series.labels},legend:{position:"top"},grid:{borderColor:"#eee"}}},areaSeries(){return[{name:"Casos",data:this.series.casos},{name:"Problemáticas",data:this.series.prob},{name:"Sesiones",data:this.series.ses},{name:"Informes",data:this.series.inf}]}},mounted(){this.fetchDashboard()},methods:{async fetchDashboard(){this.loading=!0;try{const e=await this.$axios.get("/dashboard");this.totales=e.data.totales||{},this.esteMes=e.data.esteMes||{},this.series=e.data.series||this.series}catch{this.$q.notify({type:"negative",message:"Error cargando dashboard"})}finally{this.loading=!1}}}},y={class:"row q-col-gutter-md q-mb-md"},k={class:"text-caption text-grey-7"},C={class:"text-h4 q-my-sm"},M={class:"text-positive text-caption"};function q(e,n,w,S,P,r){const m=p("apexchart");return i(),f(x,{class:"q-pa-md"},{default:a(()=>[s("div",y,[(i(!0),d(u,null,b(r.cards,t=>(i(),d("div",{class:"col-12 col-sm-3",key:t.key},[o(c,{flat:"",bordered:"",class:"q-pa-md text-center"},{default:a(()=>[s("div",k,l(t.label),1),s("div",C,l(t.value??"—"),1),s("div",M,"+"+l(t.mes)+" este mes",1)]),_:2},1024)]))),128))]),o(c,{flat:"",bordered:""},{default:a(()=>[o(_,null,{default:a(()=>n[0]||(n[0]=[s("div",{class:"text-subtitle1"},"Evolución últimos 6 meses",-1)])),_:1}),o(m,{type:"area",height:"350",options:r.areaOptions,series:r.areaSeries},null,8,["options","series"])]),_:1})]),_:1})}const D=h(v,[["render",q]]);export{D as default};
