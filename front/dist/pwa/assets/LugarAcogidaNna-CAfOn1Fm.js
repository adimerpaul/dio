import{j as A,n as I,v as N,X as C,_ as x,c as g,o as m,w as t,a,f as _,Z as y,Q as b,e as n,b as s,t as r,$ as f,a0 as O,d,a3 as h,a6 as c}from"./index-CX7iFNk1.js";import{Q as V}from"./QToolbar-D3OlmIHH.js";import{Q as v}from"./QSelect-BoS1tG2l.js";import{Q as D}from"./QPage-DusucgR0.js";import"./QMenu-BOtXKsfK.js";import"./format-CoeZ1Mr8.js";import"./QItem-Cd4rxRao.js";import"./QItemLabel-CyyqkaQM.js";const E=A({name:"QToolbarTitle",props:{shrink:Boolean},setup(i,{slots:o}){const u=I(()=>"q-toolbar__title ellipsis"+(i.shrink===!0?" col-shrink":""));return()=>N("div",{class:u.value},C(o.default))}}),T={name:"LugarAcogidaNna",data(){return{loading:!1,saving:!1,caso:null,form:{tipo_de_acogida:null,centro_de_acogida:"",cuidadora_nombre_completo:"",cuidadora_celular:"",cuidadora_domicilio:"",cuidadora_ubicacion:"",cuidadora_lat:"",cuidadora_lng:""},tipoAcogidaOptions:["ACOGIDA INSTITUCIONAL (AI)","ACOGIMIENTO CON FAMILIA AMPLIADA (AFA)","ACOGIMIENTO CON FAMILIA COMUNITARIA (AFC)","RESTITUCIÓN DE FAMILIA ORIGEN (RFO)"]}},computed:{casoId(){return this.$route.params.id},nnaNombre(){return this.caso?.victimas?.[0]?.nombres_apellidos||"—"}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0;try{const i=await this.$axios.get(`/casos/${this.casoId}`);this.caso=i.data;const o=await this.$axios.get(`/casos/${this.casoId}/acogimiento`);o.data&&Object.assign(this.form,o.data)}catch(i){console.error(i),this.$q.notify({type:"negative",message:i.response?.data?.message||"Error cargando datos del caso"})}finally{this.loading=!1}},async onSubmit(){this.saving=!0;try{await this.$axios.post(`/casos/${this.casoId}/acogimiento`,this.form),this.$q.notify({type:"positive",message:"Lugar de acogida guardado correctamente"})}catch(i){console.error(i),this.$q.notify({type:"negative",message:i.response?.data?.message||"Error al guardar los datos"})}finally{this.saving=!1}}}},q={class:"col-12 col-md-3"},S={class:"text-h6 text-primary"},L={class:"col-12 col-md-3"},Q={class:"text-subtitle1"},w={class:"col-12 col-md-3"},U={class:"text-subtitle1 text-weight-bold"},k={class:"col-12 col-md-3"},G={class:"text-subtitle1"},R={class:"row items-center q-col-gutter-md"},M={class:"col-12 col-md-6"},B={key:0,class:"col-12 col-md-6"},F={class:"row q-col-gutter-md"},j={class:"col-12"},P={class:"col-12 col-md-4"},Z={class:"col-12 col-md-4"},J={class:"col-12 col-md-4"},z={class:"row justify-end q-mt-md"};function H(i,o,u,X,e,p){return m(),g(D,{class:"q-pa-md bg-grey-2"},{default:t(()=>[a(V,{class:"bg-primary text-white q-mb-md"},{default:t(()=>[a(_,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:o[0]||(o[0]=l=>i.$router.back())}),a(E,null,{default:t(()=>o[7]||(o[7]=[y("Lugar de Acogida NNA")])),_:1})]),_:1}),a(b,{flat:"",bordered:"",class:"q-mb-md bg-white"},{default:t(()=>[a(n,{class:"row items-center q-col-gutter-sm"},{default:t(()=>[s("div",q,[o[8]||(o[8]=s("div",{class:"text-caption text-grey-7"},"COD CASO",-1)),s("div",S,r(e.caso?.caso_numero||"—"),1)]),s("div",L,[o[9]||(o[9]=s("div",{class:"text-caption text-grey-7"},"NUREJ",-1)),s("div",Q,r(e.caso?.nurej||"—"),1)]),s("div",w,[o[10]||(o[10]=s("div",{class:"text-caption text-grey-7"},"NNA",-1)),s("div",U,r(p.nnaNombre),1)]),s("div",k,[o[11]||(o[11]=s("div",{class:"text-caption text-grey-7"},"JUZGADO",-1)),s("div",G,r(e.caso?.numero_juzgado||"—"),1)])]),_:1})]),_:1}),a(b,{flat:"",bordered:"",class:"bg-white"},{default:t(()=>[a(n,{class:"q-pb-none"},{default:t(()=>[s("div",R,[s("div",M,[o[12]||(o[12]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"TIPO DE ACOGIDA",-1)),a(v,{modelValue:e.form.tipo_de_acogida,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.tipo_de_acogida=l),options:e.tipoAcogidaOptions,outlined:"",dense:"","emit-value":"","map-options":"",disable:e.saving},{prepend:t(()=>[a(d,{name:"groups"})]),_:1},8,["modelValue","options","disable"])]),e.form.tipo_de_acogida==="ACOGIDA INSTITUCIONAL (AI)"?(m(),O("div",B,[o[13]||(o[13]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"CENTRO DE ACOGIDA",-1)),a(v,{modelValue:e.form.centro_de_acogida,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.centro_de_acogida=l),options:["GOTA DE LECHE","ANDROILI","ZELADA","PENY","ALDEAS SOS","CRECER"],placeholder:"Seleccione o ingrese el nombre del centro / familia",outlined:"",dense:"","use-input":"","fill-input":"",disable:e.saving},{prepend:t(()=>[a(d,{name:"home"})]),_:1},8,["modelValue","disable"])])):f("",!0)])]),_:1}),a(h,{class:"q-my-md"}),e.form.tipo_de_acogida!=="ACOGIDA INSTITUCIONAL (AI)"&&e.form.tipo_de_acogida!==null?(m(),g(n,{key:0,class:"q-pt-none"},{default:t(()=>[o[14]||(o[14]=s("div",{class:"text-subtitle2 q-mb-sm"},"Datos del Cuidador(a)",-1)),s("div",F,[s("div",j,[a(c,{modelValue:e.form.cuidadora_nombre_completo,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.cuidadora_nombre_completo=l),label:"Nombre completo",outlined:"",dense:"",disable:e.saving},{prepend:t(()=>[a(d,{name:"person"})]),_:1},8,["modelValue","disable"])]),s("div",P,[a(c,{modelValue:e.form.cuidadora_celular,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.cuidadora_celular=l),label:"N° celular",outlined:"",dense:"",disable:e.saving},{prepend:t(()=>[a(d,{name:"phone_iphone"})]),_:1},8,["modelValue","disable"])]),s("div",Z,[a(c,{modelValue:e.form.cuidadora_domicilio,"onUpdate:modelValue":o[5]||(o[5]=l=>e.form.cuidadora_domicilio=l),label:"Domicilio",outlined:"",dense:"",disable:e.saving},{prepend:t(()=>[a(d,{name:"location_city"})]),_:1},8,["modelValue","disable"])]),s("div",J,[a(c,{modelValue:e.form.cuidadora_ubicacion,"onUpdate:modelValue":o[6]||(o[6]=l=>e.form.cuidadora_ubicacion=l),label:"Ubicación / Zona",outlined:"",dense:"",disable:e.saving},{prepend:t(()=>[a(d,{name:"place"})]),_:1},8,["modelValue","disable"])])])]),_:1})):f("",!0),a(n,{class:"q-pt-none"},{default:t(()=>[s("div",z,[a(_,{color:"primary",unelevated:"",icon:"save",label:"Guardar",loading:e.saving,"no-caps":"",onClick:p.onSubmit},null,8,["loading","onClick"])])]),_:1})]),_:1})]),_:1})}const to=x(T,[["render",H]]);export{to as default};
