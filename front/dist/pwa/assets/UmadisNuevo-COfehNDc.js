import{_ as D,Y as q,c as V,o as c,w as s,a0 as f,$ as _,b as l,a as i,f as v,ag as M,Q as p,e as r,d as h,a3 as U,a6 as d,a7 as I,a1 as A,a2 as N,Z as b,t as u}from"./index-CJkF-2xs.js";import{Q as x}from"./QSelect-BwLskIkO.js";import{Q as F}from"./QMarkupTable-Baj0S7sh.js";import{Q as C}from"./QExpansionItem-CrUwN90s.js";import{Q}from"./QForm-DYhvXIQ3.js";import{Q as y}from"./QMenu-CuLTUHuz.js";import{Q as R}from"./QPage-BVfCMHyM.js";import{M as j}from"./MapPicker-CPCAdamo.js";const L={name:"CasoNuevoUMADIS",components:{MapPicker:j},props:{casoId:{type:[Number,String],default:null},editable:{type:Boolean,default:!1}},data(){return{loading:!1,recognition:null,activeField:null,isListening:!1,oruroCenter:[-17.9667,-67.1167],psicologos:[],abogados:[],sociales:[],sexos:[{label:"Femenino",value:"Femenino"},{label:"Masculino",value:"Masculino"},{label:"Otro",value:"Otro"}],estadosCiviles:["Soltero/a","Casado/a","Divorciado/a","Separado/a","Viudo/a","Unión libre","Otro"],f:{tipo:"UMADIS",zona:"CENTRAL",principal:"",caso_numero:"",caso_fecha_hecho:"",caso_descripcion:"",denunciantes:[{denunciante_nombres:"",denunciante_paterno:"",denunciante_materno:"",denunciante_documento:"Carnet de identidad",denunciante_nro:"",denunciante_sexo:"",denunciante_lugar_nacimiento:"",denunciante_fecha_nacimiento:"",denunciante_edad:"",denunciante_telefono:"",denunciante_residencia:"",denunciante_estado_civil:"",denunciante_relacion:"",denunciante_grado:"",denunciante_trabaja:!1,denunciante_ocupacion:"",denunciante_idioma:"",denunciante_domicilio_actual:"",latitud:null,longitud:null}],denunciados:[{denunciado_nombres:"",denunciado_paterno:"",denunciado_materno:"",denunciado_documento:"Carnet de identidad",denunciado_nro:"",denunciado_sexo:"",denunciado_lugar_nacimiento:"",denunciado_fecha_nacimiento:"",denunciado_edad:"",denunciado_telefono:"",denunciado_residencia:"",denunciado_estado_civil:"",denunciado_relacion:"",denunciado_grado:"",denunciado_ocupacion:"",denunciado_idioma:"",denunciado_domicilio_actual:"",denunciado_latitud:null,denunciado_longitud:null}],familiares:[],psicologica_user_id:null,trabajo_social_user_id:null,legal_user_id:null}}},computed:{denunciantePos:{get(){const a=this.f.denunciantes?.[0]||{};return{latitud:a.latitud,longitud:a.longitud}},set(a){this.f.denunciantes?.length&&(this.f.denunciantes[0].latitud=a?.latitud??a?.lat??null,this.f.denunciantes[0].longitud=a?.longitud??a?.lng??null)}}},mounted(){if(this.$axios.get("/usuariosRole").then(a=>{this.psicologos=a.data.psicologos||[],this.abogados=a.data.abogados||[],this.sociales=a.data.sociales||[]}).catch(()=>this.$alert?.error?.("No se pudo cargar los usuarios por rol")),"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const a=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new a,this.recognition.lang="es-ES",this.recognition.interimResults=!1,this.recognition.continuous=!1,this.recognition.onstart=()=>{this.isListening=!0},this.recognition.onend=()=>{this.isListening=!1,this.activeField=null},this.recognition.onresult=e=>{const g=e.results[0][0].transcript;this.activeField==="caso_descripcion"&&(this.f.caso_descripcion=(this.f.caso_descripcion?this.f.caso_descripcion+" ":"")+g)}}this.getCaso()},methods:{show(a){return a==null||a===""?"—":String(a)},yesNo(a){return a===!0||a===1||a==="1"?"Sí":"No"},fmtDate(a){if(!a)return"";const e=new Date(a);if(isNaN(e.getTime()))return this.show(a);const g=e.getFullYear(),w=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${g}-${w}-${o}`},getCaso(){!this.editable||!this.casoId||(this.loading=!0,this.$axios.get(`/casos/${this.casoId}`).then(a=>{const e=a.data||{};(!e.denunciantes||!e.denunciantes.length)&&(e.denunciantes=[this.f.denunciantes[0]]),(!e.denunciados||!e.denunciados.length)&&(e.denunciados=[this.f.denunciados[0]]),e.familiares||(e.familiares=[]),this.f={...this.f,...e,tipo:"UMADIS"}}).catch(()=>this.$alert?.error?.("No se pudo cargar el caso")).finally(()=>{this.loading=!1}))},req(a){return!!a||"Requerido"},addFam(){this.f.familiares.push({familiar_nombres:"",familiar_paterno:"",familiar_materno:"",familiar_edad:null,familiar_parentesco:"",familiar_estado_civil:"",familiar_ocupacion:"",familiar_telefono:""})},resetForm(){const a={tipo:"UMADIS",zona:this.f.zona};this.f={...a,principal:"",caso_numero:"",caso_fecha_hecho:"",caso_descripcion:"",denunciantes:[{...this.$options.data().f.denunciantes[0]}],denunciados:[{...this.$options.data().f.denunciados[0]}],familiares:[],psicologica_user_id:null,trabajo_social_user_id:null,legal_user_id:null},this.$q.notify({type:"info",message:"Formulario reiniciado"})},autoEdad(a){const e=a==="denunciado"?"denunciados":"denunciantes",g=this.f[e]?.[0];if(!g?.[`${a}_fecha_nacimiento`])return;const w=new Date(g[`${a}_fecha_nacimiento`]),t=Math.floor((new Date-w)/(1e3*60*60*24*365.25));g[`${a}_edad`]=isFinite(t)?t:""},toggleRecognition(a){if(!this.recognition){this.$q.notify({color:"negative",message:"El navegador no soporta micrófono."});return}if(this.isListening&&this.activeField===a){try{this.recognition.stop()}catch{}return}if(this.isListening)try{this.recognition.stop()}catch{}this.activeField=a;try{this.recognition.start()}catch{}},async update(){if(!this.f.principal){this.$alert?.error?.("La tipología principal es obligatoria");return}this.loading=!0;try{await this.$axios.put(`/casos/${this.casoId}`,this.f),this.$alert?.success?.("Caso UMADIS actualizado"),this.$router.push(`/casos/${this.casoId}`)}catch(a){this.$alert?.error?.(a?.response?.data?.message||"No se pudo actualizar el caso")}finally{this.loading=!1}},async save(){this.loading=!0;try{const a=await this.$axios.post("/casos",{...this.f,tipo:"UMADIS"}),e=a?.data?.id||a?.data?.caso?.id;this.$alert?.success?.("Caso UMADIS creado"),e?this.$router.push(`/casos/${e}`):this.$router.push("/casos?tipo=UMADIS")}catch(a){this.$alert?.error?.(a?.response?.data?.message||"No se pudo crear el caso UMADIS")}finally{this.loading=!1}}}},E={key:0,class:"toolbar q-pa-sm bg-white row items-center q-gutter-sm shadow-1"},P={class:"col-auto row q-gutter-sm"},T={key:1,class:"q-mb-sm text-right"},z={class:"row q-col-gutter-md"},B={class:"col-12 col-md-3"},O={class:"col-12 col-md-5"},G={class:"col-6 col-md-2"},Z={class:"col-6 col-md-2"},Y={class:"row q-col-gutter-md"},H={class:"col-12 col-md-3"},J={class:"col-6 col-md-3"},K={class:"col-6 col-md-3"},W={class:"col-6 col-md-3"},X={class:"col-6 col-md-3"},$={class:"col-6 col-md-3"},ee={class:"col-12 col-md-3"},oe={class:"col-12 col-md-3"},le={class:"col-6 col-md-2"},ne={class:"col-6 col-md-3"},ie={class:"col-6 col-md-3"},ae={class:"col-12 col-md-3"},se={class:"col-12 col-md-3"},de={class:"col-12 col-md-3"},te={class:"col-12 col-md-3"},ce={class:"col-12 col-md-3"},ue={class:"col-12 col-md-3"},re={class:"col-12 col-md-7"},me={class:"col-12 col-md-2"},_e={class:"col-12"},fe={class:"q-mb-sm"},pe={class:"row q-col-gutter-xs"},be={class:"col"},ge={class:"col-6 col-md-3"},ve={class:"col-6 col-md-3"},Ve={class:"text-center"},he={key:0,class:"text-grey text-caption"},xe={class:"row q-col-gutter-md"},ye={class:"col-12 col-md-3"},Ue={class:"col-6 col-md-3"},we={class:"col-6 col-md-3"},ke={class:"col-6 col-md-3"},Ce={class:"col-6 col-md-3"},Se={class:"col-6 col-md-3"},De={class:"col-12 col-md-3"},qe={class:"col-12 col-md-3"},Me={class:"col-6 col-md-2"},Ie={class:"col-6 col-md-3"},Ae={class:"col-6 col-md-3"},Ne={class:"col-6 col-md-3"},Fe={class:"col-6 col-md-3"},Qe={class:"col-6 col-md-3"},Re={class:"col-6 col-md-3"},je={class:"col-12 col-md-6"},Le={class:"col-12 col-md-6"},Ee={class:"row q-col-gutter-md"},Pe={class:"col-12 col-md-4"},Te={class:"col-12 col-md-4"},ze={class:"col-12 col-md-4"},Be={class:"text-right q-mb-lg"},Oe={key:3,class:"q-pa-md"},Ge={class:"col-12 col-md-8"},Ze={class:"text-h6 text-weight-bold"},Ye={key:0},He={key:1},Je={class:"text-caption text-grey-7"},Ke={class:"col-12 col-md-4 flex items-center justify-end"},We={class:"row q-col-gutter-md"},Xe={class:"col-12 col-md-6"},$e={class:"text-body1"},eo={class:"col-6 col-md-3"},oo={class:"text-body1"},lo={class:"col-6 col-md-3"},no={class:"text-body1"},io={class:"col-12"},ao={class:"q-pa-sm bg-grey-1",style:{"white-space":"pre-wrap","border-radius":"10px"}},so={class:"row q-col-gutter-md"},to={class:"col-12 col-md-4"},co={class:"text-body1"},uo={class:"col-12 col-md-4"},ro={class:"text-body1"},mo={class:"col-12 col-md-4"},_o={class:"text-body1"},fo={class:"row q-col-gutter-md"},po={key:0,class:"col-12 col-md-3"},bo={class:"text-body1"},go={key:1,class:"col-12 col-md-3"},vo={class:"text-body1"},Vo={key:2,class:"col-12 col-md-3"},ho={class:"text-body1"},xo={key:3,class:"col-12 col-md-3"},yo={class:"text-body1"},Uo={key:4,class:"col-12 col-md-3"},wo={class:"text-body1"},ko={key:5,class:"col-12 col-md-3"},Co={class:"text-body1"};function So(a,e,g,w,o,t){const S=q("MapPicker");return c(),V(R,{class:"q-pa-md bg-grey-2"},{default:s(()=>[g.editable?_("",!0):(c(),f("div",E,[e[48]||(e[48]=l("div",{class:"col"},[l("div",{class:"text-h6 text-weight-bold"},"Registro de Denuncias — UMADIS"),l("div",{class:"text-caption text-grey-7"},"Nuevo caso · Servicio Legal Integral Municipal (UMADIS)")],-1)),l("div",P,[i(v,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:t.resetForm},null,8,["onClick"]),i(v,{color:"primary",icon:"save",label:"Guardar",loading:o.loading,onClick:t.save},null,8,["loading","onClick"])])])),g.editable?(c(),f("div",T,[i(v,{flat:"",color:"primary",icon:"refresh",label:"Recargar",onClick:t.getCaso,class:"q-mr-sm"},null,8,["onClick"]),a.$store.user?.role==="Administrador"||a.$store.user?.role==="Asistente"?(c(),V(v,{key:0,color:"primary",icon:"save",label:"Actualizar",loading:o.loading,onClick:t.update},null,8,["loading","onClick"])):_("",!0)])):_("",!0),a.$store.user?.role==="Administrador"||a.$store.user?.role==="Asistente"?(c(),V(Q,{key:2,class:"q-mt-lg",onSubmit:M(t.save,["prevent"])},{default:s(()=>[i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"assignment",class:"q-mr-sm"}),e[49]||(e[49]=l("div",{class:"text-subtitle1 text-weight-medium"},"1) Encabezado",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[l("div",z,[l("div",B,[i(d,{modelValue:o.f.caso_fecha_hecho,"onUpdate:modelValue":e[0]||(e[0]=n=>o.f.caso_fecha_hecho=n),type:"date",dense:"",outlined:"",label:"Fecha de registro"},null,8,["modelValue"])]),l("div",O,[i(d,{modelValue:o.f.principal,"onUpdate:modelValue":e[1]||(e[1]=n=>o.f.principal=n),dense:"",outlined:"",clearable:"",label:"Tipología del hecho principal *",rules:[t.req]},null,8,["modelValue","rules"])]),l("div",G,[i(d,{modelValue:o.f.zona,"onUpdate:modelValue":e[2]||(e[2]=n=>o.f.zona=n),dense:"",outlined:"",clearable:"",label:"Módulo / Zona"},null,8,["modelValue"])]),l("div",Z,[i(d,{modelValue:o.f.caso_numero,"onUpdate:modelValue":e[3]||(e[3]=n=>o.f.caso_numero=n),dense:"",outlined:"",clearable:"",label:"N° caso (si corresponde)",readonly:""},null,8,["modelValue"])])])]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(p,null,{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"assignment",class:"q-mr-sm"}),e[50]||(e[50]=l("div",{class:"text-subtitle1 text-weight-medium"},"2) Datos del/la denunciante",-1))]),_:1}),i(r,null,{default:s(()=>[l("div",Y,[l("div",H,[i(d,{modelValue:o.f.denunciantes[0].denunciante_nombres,"onUpdate:modelValue":e[4]||(e[4]=n=>o.f.denunciantes[0].denunciante_nombres=n),dense:"",outlined:"",clearable:"",label:"Nombres *",rules:[t.req]},null,8,["modelValue","rules"])]),l("div",J,[i(d,{modelValue:o.f.denunciantes[0].denunciante_paterno,"onUpdate:modelValue":e[5]||(e[5]=n=>o.f.denunciantes[0].denunciante_paterno=n),dense:"",outlined:"",clearable:"",label:"Ap. paterno"},null,8,["modelValue"])]),l("div",K,[i(d,{modelValue:o.f.denunciantes[0].denunciante_materno,"onUpdate:modelValue":e[6]||(e[6]=n=>o.f.denunciantes[0].denunciante_materno=n),dense:"",outlined:"",clearable:"",label:"Ap. materno"},null,8,["modelValue"])]),l("div",W,[i(x,{modelValue:o.f.denunciantes[0].denunciante_sexo,"onUpdate:modelValue":e[7]||(e[7]=n=>o.f.denunciantes[0].denunciante_sexo=n),options:o.sexos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Sexo"},null,8,["modelValue","options"])]),l("div",X,[i(x,{modelValue:o.f.denunciantes[0].denunciante_documento,"onUpdate:modelValue":e[8]||(e[8]=n=>o.f.denunciantes[0].denunciante_documento=n),options:a.$documentos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Documento"},null,8,["modelValue","options"])]),l("div",$,[i(d,{modelValue:o.f.denunciantes[0].denunciante_nro,"onUpdate:modelValue":e[9]||(e[9]=n=>o.f.denunciantes[0].denunciante_nro=n),dense:"",outlined:"",clearable:"",label:"N° documento"},null,8,["modelValue"])]),l("div",ee,[i(d,{modelValue:o.f.denunciantes[0].denunciante_fecha_nacimiento,"onUpdate:modelValue":[e[10]||(e[10]=n=>o.f.denunciantes[0].denunciante_fecha_nacimiento=n),e[11]||(e[11]=n=>t.autoEdad("denunciante"))],type:"date",dense:"",outlined:"",label:"Fecha de nacimiento"},null,8,["modelValue"])]),l("div",oe,[i(d,{modelValue:o.f.denunciantes[0].denunciante_lugar_nacimiento,"onUpdate:modelValue":e[12]||(e[12]=n=>o.f.denunciantes[0].denunciante_lugar_nacimiento=n),dense:"",outlined:"",clearable:"",label:"Lugar de nacimiento"},null,8,["modelValue"])]),l("div",le,[i(d,{modelValue:o.f.denunciantes[0].denunciante_edad,"onUpdate:modelValue":e[13]||(e[13]=n=>o.f.denunciantes[0].denunciante_edad=n),modelModifiers:{number:!0},type:"number",dense:"",outlined:"",label:"Edad"},null,8,["modelValue"])]),l("div",ne,[i(d,{modelValue:o.f.denunciantes[0].denunciante_residencia,"onUpdate:modelValue":e[14]||(e[14]=n=>o.f.denunciantes[0].denunciante_residencia=n),dense:"",outlined:"",clearable:"",label:"Residencia habitual"},null,8,["modelValue"])]),l("div",ie,[i(x,{modelValue:o.f.denunciantes[0].denunciante_estado_civil,"onUpdate:modelValue":e[15]||(e[15]=n=>o.f.denunciantes[0].denunciante_estado_civil=n),options:o.estadosCiviles,dense:"",outlined:"",label:"Estado civil"},null,8,["modelValue","options"])]),l("div",ae,[i(d,{modelValue:o.f.denunciantes[0].denunciante_relacion,"onUpdate:modelValue":e[16]||(e[16]=n=>o.f.denunciantes[0].denunciante_relacion=n),dense:"",outlined:"",clearable:"",label:"Relación con el denunciado/a"},null,8,["modelValue"])]),l("div",se,[i(d,{modelValue:o.f.denunciantes[0].denunciante_grado,"onUpdate:modelValue":e[17]||(e[17]=n=>o.f.denunciantes[0].denunciante_grado=n),dense:"",outlined:"",clearable:"",label:"Grado de instrucción"},null,8,["modelValue"])]),l("div",de,[i(I,{modelValue:o.f.denunciantes[0].denunciante_trabaja,"onUpdate:modelValue":e[18]||(e[18]=n=>o.f.denunciantes[0].denunciante_trabaja=n),label:"Trabaja"},null,8,["modelValue"])]),l("div",te,[i(d,{modelValue:o.f.denunciantes[0].denunciante_ocupacion,"onUpdate:modelValue":e[19]||(e[19]=n=>o.f.denunciantes[0].denunciante_ocupacion=n),dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue"])]),l("div",ce,[i(d,{modelValue:o.f.denunciantes[0].denunciante_idioma,"onUpdate:modelValue":e[20]||(e[20]=n=>o.f.denunciantes[0].denunciante_idioma=n),dense:"",outlined:"",clearable:"",label:"Idioma"},null,8,["modelValue"])]),l("div",ue,[i(d,{modelValue:o.f.denunciantes[0].denunciante_telefono,"onUpdate:modelValue":e[21]||(e[21]=n=>o.f.denunciantes[0].denunciante_telefono=n),dense:"",outlined:"",clearable:"",label:"Teléfono de referencia"},null,8,["modelValue"])]),l("div",re,[i(d,{modelValue:o.f.denunciantes[0].denunciante_domicilio_actual,"onUpdate:modelValue":e[22]||(e[22]=n=>o.f.denunciantes[0].denunciante_domicilio_actual=n),dense:"",outlined:"",clearable:"",label:"Domicilio actual"},null,8,["modelValue"])]),l("div",me,[i(v,{outline:"",label:"Buscar en mapa",onClick:e[23]||(e[23]=n=>a.$refs.denMap?.geocodeAndFly(o.f.denunciantes[0].denunciante_domicilio_actual))})]),l("div",_e,[i(S,{modelValue:t.denunciantePos,"onUpdate:modelValue":e[24]||(e[24]=n=>t.denunciantePos=n),center:o.oruroCenter,address:o.f.denunciantes[0].denunciante_domicilio_actual,country:"bo",ref:"denMap"},null,8,["modelValue","center","address"])])])]),_:1})]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(C,{icon:"diversity_3","dense-toggle":"","expand-separator":"",label:"3) Grupo familiar","header-class":"text-subtitle1"},{default:s(()=>[i(p,null,{default:s(()=>[i(r,null,{default:s(()=>[l("div",fe,[i(v,{dense:"",icon:"add",color:"primary",label:"Agregar familiar",onClick:t.addFam},null,8,["onClick"])]),i(F,{dense:"",flat:"",bordered:""},{default:s(()=>[e[51]||(e[51]=l("thead",null,[l("tr",{class:"bg-blue-1 text-blue-10"},[l("th",null,"Nombres y apellidos"),l("th",{style:{width:"90px"}},"Edad"),l("th",{style:{width:"160px"}},"Parentesco"),l("th",{style:{width:"160px"}},"Estado civil"),l("th",null,"Ocupación"),l("th",{style:{width:"160px"}},"Celular"),l("th",{style:{width:"56px"}})])],-1)),l("tbody",null,[(c(!0),f(A,null,N(o.f.familiares,(n,k)=>(c(),f("tr",{key:"g"+k},[l("td",pe,[l("div",be,[i(d,{modelValue:n.familiar_nombres,"onUpdate:modelValue":m=>n.familiar_nombres=m,dense:"",outlined:"",placeholder:"Nombres"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ge,[i(d,{modelValue:n.familiar_paterno,"onUpdate:modelValue":m=>n.familiar_paterno=m,dense:"",outlined:"",placeholder:"Paterno"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ve,[i(d,{modelValue:n.familiar_materno,"onUpdate:modelValue":m=>n.familiar_materno=m,dense:"",outlined:"",placeholder:"Materno"},null,8,["modelValue","onUpdate:modelValue"])])]),l("td",null,[i(d,{modelValue:n.familiar_edad,"onUpdate:modelValue":m=>n.familiar_edad=m,modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[i(d,{modelValue:n.familiar_parentesco,"onUpdate:modelValue":m=>n.familiar_parentesco=m,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[i(d,{modelValue:n.familiar_estado_civil,"onUpdate:modelValue":m=>n.familiar_estado_civil=m,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[i(d,{modelValue:n.familiar_ocupacion,"onUpdate:modelValue":m=>n.familiar_ocupacion=m,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[i(d,{modelValue:n.familiar_telefono,"onUpdate:modelValue":m=>n.familiar_telefono=m,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),l("td",Ve,[i(v,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:m=>o.f.familiares.splice(k,1)},null,8,["onClick"])])]))),128))])]),_:1}),o.f.familiares.length?_("",!0):(c(),f("div",he,"Sin integrantes registrados"))]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(C,{icon:"person_off","dense-toggle":"","expand-separator":"",label:"4) Datos de la persona denunciada","header-class":"text-subtitle1"},{default:s(()=>[i(p,null,{default:s(()=>[i(r,null,{default:s(()=>[l("div",xe,[l("div",ye,[i(d,{modelValue:o.f.denunciados[0].denunciado_nombres,"onUpdate:modelValue":e[25]||(e[25]=n=>o.f.denunciados[0].denunciado_nombres=n),dense:"",outlined:"",clearable:"",label:"Nombres"},null,8,["modelValue"])]),l("div",Ue,[i(d,{modelValue:o.f.denunciados[0].denunciado_paterno,"onUpdate:modelValue":e[26]||(e[26]=n=>o.f.denunciados[0].denunciado_paterno=n),dense:"",outlined:"",clearable:"",label:"Ap. paterno"},null,8,["modelValue"])]),l("div",we,[i(d,{modelValue:o.f.denunciados[0].denunciado_materno,"onUpdate:modelValue":e[27]||(e[27]=n=>o.f.denunciados[0].denunciado_materno=n),dense:"",outlined:"",clearable:"",label:"Ap. materno"},null,8,["modelValue"])]),l("div",ke,[i(x,{modelValue:o.f.denunciados[0].denunciado_sexo,"onUpdate:modelValue":e[28]||(e[28]=n=>o.f.denunciados[0].denunciado_sexo=n),options:o.sexos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Sexo"},null,8,["modelValue","options"])]),l("div",Ce,[i(x,{modelValue:o.f.denunciados[0].denunciado_documento,"onUpdate:modelValue":e[29]||(e[29]=n=>o.f.denunciados[0].denunciado_documento=n),options:a.$documentos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Documento"},null,8,["modelValue","options"])]),l("div",Se,[i(d,{modelValue:o.f.denunciados[0].denunciado_nro,"onUpdate:modelValue":e[30]||(e[30]=n=>o.f.denunciados[0].denunciado_nro=n),dense:"",outlined:"",clearable:"",label:"N° documento"},null,8,["modelValue"])]),l("div",De,[i(d,{modelValue:o.f.denunciados[0].denunciado_fecha_nacimiento,"onUpdate:modelValue":[e[31]||(e[31]=n=>o.f.denunciados[0].denunciado_fecha_nacimiento=n),e[32]||(e[32]=n=>t.autoEdad("denunciado"))],type:"date",dense:"",outlined:"",label:"Fecha de nacimiento"},null,8,["modelValue"])]),l("div",qe,[i(d,{modelValue:o.f.denunciados[0].denunciado_lugar_nacimiento,"onUpdate:modelValue":e[33]||(e[33]=n=>o.f.denunciados[0].denunciado_lugar_nacimiento=n),dense:"",outlined:"",clearable:"",label:"Lugar de nacimiento"},null,8,["modelValue"])]),l("div",Me,[i(d,{modelValue:o.f.denunciados[0].denunciado_edad,"onUpdate:modelValue":e[34]||(e[34]=n=>o.f.denunciados[0].denunciado_edad=n),modelModifiers:{number:!0},type:"number",dense:"",outlined:"",label:"Edad"},null,8,["modelValue"])]),l("div",Ie,[i(d,{modelValue:o.f.denunciados[0].denunciado_residencia,"onUpdate:modelValue":e[35]||(e[35]=n=>o.f.denunciados[0].denunciado_residencia=n),dense:"",outlined:"",clearable:"",label:"Residencia habitual"},null,8,["modelValue"])]),l("div",Ae,[i(d,{modelValue:o.f.denunciados[0].denunciado_estado_civil,"onUpdate:modelValue":e[36]||(e[36]=n=>o.f.denunciados[0].denunciado_estado_civil=n),dense:"",outlined:"",clearable:"",label:"Estado civil"},null,8,["modelValue"])]),l("div",Ne,[i(d,{modelValue:o.f.denunciados[0].denunciado_idioma,"onUpdate:modelValue":e[37]||(e[37]=n=>o.f.denunciados[0].denunciado_idioma=n),dense:"",outlined:"",clearable:"",label:"Idioma"},null,8,["modelValue"])]),l("div",Fe,[i(d,{modelValue:o.f.denunciados[0].denunciado_grado,"onUpdate:modelValue":e[38]||(e[38]=n=>o.f.denunciados[0].denunciado_grado=n),dense:"",outlined:"",clearable:"",label:"Grado de instrucción"},null,8,["modelValue"])]),l("div",Qe,[i(d,{modelValue:o.f.denunciados[0].denunciado_ocupacion,"onUpdate:modelValue":e[39]||(e[39]=n=>o.f.denunciados[0].denunciado_ocupacion=n),dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue"])]),l("div",Re,[i(d,{modelValue:o.f.denunciados[0].denunciado_telefono,"onUpdate:modelValue":e[40]||(e[40]=n=>o.f.denunciados[0].denunciado_telefono=n),dense:"",outlined:"",clearable:"",label:"Teléfono"},null,8,["modelValue"])]),l("div",je,[i(d,{modelValue:o.f.denunciados[0].denunciado_domicilio_actual,"onUpdate:modelValue":e[41]||(e[41]=n=>o.f.denunciados[0].denunciado_domicilio_actual=n),dense:"",outlined:"",clearable:"",label:"Dirección actual"},null,8,["modelValue"])]),l("div",Le,[i(d,{modelValue:o.f.denunciados[0].denunciado_relacion,"onUpdate:modelValue":e[42]||(e[42]=n=>o.f.denunciados[0].denunciado_relacion=n),dense:"",outlined:"",clearable:"",label:"Relación con la denunciante"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"description",class:"q-mr-sm"}),e[52]||(e[52]=l("div",{class:"text-subtitle1 text-weight-medium"},"5) Breve circunstancia del hecho / denuncia",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[i(d,{modelValue:o.f.caso_descripcion,"onUpdate:modelValue":e[44]||(e[44]=n=>o.f.caso_descripcion=n),type:"textarea",autogrow:"",outlined:"",dense:"",clearable:"",label:"Descripción",maxlength:"5000",counter:""},{append:s(()=>[i(h,{name:"mic",class:"cursor-pointer",color:o.isListening&&o.activeField==="caso_descripcion"?"red":"grey-7",onClick:e[43]||(e[43]=n=>t.toggleRecognition("caso_descripcion"))},null,8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card q-mb-xl"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"task_alt",class:"q-mr-sm"}),e[53]||(e[53]=l("div",{class:"text-subtitle1 text-weight-medium"},"6) Seguimiento del caso",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[l("div",Ee,[l("div",Pe,[i(x,{modelValue:o.f.psicologica_user_id,"onUpdate:modelValue":e[45]||(e[45]=n=>o.f.psicologica_user_id=n),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.psicologos.map(n=>({label:n.name,value:n.id})),label:"Área psicológica (responsable)"},null,8,["modelValue","options"])]),l("div",Te,[i(x,{modelValue:o.f.trabajo_social_user_id,"onUpdate:modelValue":e[46]||(e[46]=n=>o.f.trabajo_social_user_id=n),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.sociales.map(n=>({label:n.name,value:n.id})),label:"Área social (responsable)"},null,8,["modelValue","options"])]),l("div",ze,[i(x,{modelValue:o.f.legal_user_id,"onUpdate:modelValue":e[47]||(e[47]=n=>o.f.legal_user_id=n),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.abogados.map(n=>({label:n.name,value:n.id})),label:"Área legal (responsable)"},null,8,["modelValue","options"])])])]),_:1})]),_:1}),l("div",Be,[i(v,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:t.resetForm,class:"q-mr-sm"},null,8,["onClick"]),g.editable?_("",!0):(c(),V(v,{key:0,color:"primary",icon:"save",label:"Guardar",loading:o.loading,onClick:t.save},null,8,["loading","onClick"])),g.editable?(c(),V(v,{key:1,color:"primary",icon:"save",label:"Actualizar",loading:o.loading,onClick:t.update},null,8,["loading","onClick"])):_("",!0)])]),_:1},8,["onSubmit"])):(c(),f("div",Oe,[i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center q-col-gutter-sm"},{default:s(()=>[l("div",Ge,[l("div",Ze,[e[54]||(e[54]=b(" Detalle UMADIS · Caso ")),o.f.caso_numero?(c(),f("span",Ye,"#"+u(o.f.caso_numero),1)):(c(),f("span",He,"#"+u(o.f.id),1))]),l("div",Je,[e[55]||(e[55]=b(" Registrado: ")),i(y,{dense:"",color:"indigo-1","text-color":"indigo-9"},{default:s(()=>[b(u(t.fmtDate(o.f.caso_fecha_hecho)||"—"),1)]),_:1}),e[56]||(e[56]=b(" · Por: ")),i(y,{dense:"",color:"grey-2","text-color":"grey-9"},{default:s(()=>[b(u(o.f.user?.name||"—"),1)]),_:1})])]),l("div",Ke,[i(y,{dense:"",outline:"",color:"primary","text-color":"primary"},{default:s(()=>[b("Tipo: "+u(t.show(o.f.tipo||"UMADIS")),1)]),_:1}),i(y,{dense:"",outline:"",color:"teal","text-color":"teal"},{default:s(()=>[b("Zona: "+u(t.show(o.f.zona)),1)]),_:1})])]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"assignment",class:"q-mr-sm"}),e[57]||(e[57]=l("div",{class:"text-subtitle1 text-weight-medium"},"1) Datos del caso",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[l("div",We,[l("div",Xe,[e[58]||(e[58]=l("div",{class:"text-caption text-grey-7"},"Tipología principal",-1)),l("div",$e,u(t.show(o.f.principal)),1)]),l("div",eo,[e[59]||(e[59]=l("div",{class:"text-caption text-grey-7"},"N° caso",-1)),l("div",oo,u(t.show(o.f.caso_numero)),1)]),l("div",lo,[e[60]||(e[60]=l("div",{class:"text-caption text-grey-7"},"Fecha de registro",-1)),l("div",no,u(t.fmtDate(o.f.caso_fecha_hecho)||"—"),1)]),l("div",io,[e[61]||(e[61]=l("div",{class:"text-caption text-grey-7 q-mb-xs"},"Descripción",-1)),l("div",ao,u(t.show(o.f.caso_descripcion)),1)])])]),_:1})]),_:1}),i(p,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"people_alt",class:"q-mr-sm"}),e[62]||(e[62]=l("div",{class:"text-subtitle1 text-weight-medium"},"2) Responsables",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[l("div",so,[l("div",to,[e[63]||(e[63]=l("div",{class:"text-caption text-grey-7"},"Área Psicológica",-1)),l("div",co,[b(u(o.f.psicologica_user?.name||"—")+" ",1),o.f.psicologica_user?.celular?(c(),V(y,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[b(u(o.f.psicologica_user?.celular),1)]),_:1})):_("",!0)])]),l("div",uo,[e[64]||(e[64]=l("div",{class:"text-caption text-grey-7"},"Trabajo Social",-1)),l("div",ro,[b(u(o.f.trabajo_social_user?.name||"—")+" ",1),o.f.trabajo_social_user?.celular?(c(),V(y,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[b(u(o.f.trabajo_social_user?.celular),1)]),_:1})):_("",!0)])]),l("div",mo,[e[65]||(e[65]=l("div",{class:"text-caption text-grey-7"},"Área Legal",-1)),l("div",_o,[b(u(o.f.legal_user?.name||"—")+" ",1),o.f.legal_user?.celular?(c(),V(y,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[b(u(o.f.legal_user?.celular),1)]),_:1})):_("",!0)])])])]),_:1})]),_:1}),o.f.fecha_apertura_caso||o.f.fecha_derivacion_psicologica||o.f.fecha_informe_area_psicologica||o.f.fecha_informe_area_social||o.f.fecha_informe_trabajo_social||o.f.fecha_derivacion_area_legal?(c(),V(p,{key:0,flat:"",bordered:"",class:"section-card"},{default:s(()=>[i(r,{class:"row items-center"},{default:s(()=>[i(h,{name:"event",class:"q-mr-sm"}),e[66]||(e[66]=l("div",{class:"text-subtitle1 text-weight-medium"},"3) Fechas clave",-1))]),_:1}),i(U),i(r,null,{default:s(()=>[l("div",fo,[o.f.fecha_apertura_caso?(c(),f("div",po,[e[67]||(e[67]=l("div",{class:"text-caption text-grey-7"},"Apertura",-1)),l("div",bo,u(t.fmtDate(o.f.fecha_apertura_caso)),1)])):_("",!0),o.f.fecha_derivacion_psicologica?(c(),f("div",go,[e[68]||(e[68]=l("div",{class:"text-caption text-grey-7"},"Derivación Psicológica",-1)),l("div",vo,u(t.fmtDate(o.f.fecha_derivacion_psicologica)),1)])):_("",!0),o.f.fecha_informe_area_psicologica?(c(),f("div",Vo,[e[69]||(e[69]=l("div",{class:"text-caption text-grey-7"},"Informe Psicología",-1)),l("div",ho,u(t.fmtDate(o.f.fecha_informe_area_psicologica)),1)])):_("",!0),o.f.fecha_informe_area_social?(c(),f("div",xo,[e[70]||(e[70]=l("div",{class:"text-caption text-grey-7"},"Informe Social",-1)),l("div",yo,u(t.fmtDate(o.f.fecha_informe_area_social)),1)])):_("",!0),o.f.fecha_informe_trabajo_social?(c(),f("div",Uo,[e[71]||(e[71]=l("div",{class:"text-caption text-grey-7"},"Informe Trabajo Social",-1)),l("div",wo,u(t.fmtDate(o.f.fecha_informe_trabajo_social)),1)])):_("",!0),o.f.fecha_derivacion_area_legal?(c(),f("div",ko,[e[72]||(e[72]=l("div",{class:"text-caption text-grey-7"},"Derivación Legal",-1)),l("div",Co,u(t.fmtDate(o.f.fecha_derivacion_area_legal)),1)])):_("",!0)])]),_:1})]),_:1})):_("",!0)]))]),_:1})}const Ro=D(L,[["render",So],["__scopeId","data-v-b57ce86d"]]);export{Ro as N};
