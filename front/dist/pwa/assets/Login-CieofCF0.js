import{Q as I}from"./QImg-At8gMzsT.js";import{_ as V,g as q,r,k as $,c as k,o as C,w as t,a as s,b as o,Q as _,e as p,Z as c,a3 as b,al as x,d as g,aj as O,f,t as S}from"./index-wIyr8sut.js";import{Q as A}from"./QSpace-m5mX7MzS.js";import{Q as B}from"./QForm-LOVi7P6Z.js";import{Q as D}from"./QPage-CvQroZbZ.js";import{Q as N,a as z}from"./QLayout-Bzc-PNMw.js";import"./QResizeObserver-g4B0zp19.js";const L={class:"row items-center q-mt-sm q-mb-md"},M={class:"text-body2"},E={class:"text-caption text-grey-6"},G={__name:"Login",setup(P){const{proxy:l}=q(),d=r(""),u=r(""),n=r(!1),v=r(!1),m=r(!1),y=$(()=>new Date().getFullYear());function Q(){m.value=!0,l.$axios.post("/login",{username:d.value,password:u.value}).then(i=>{const{user:e,token:a}=i.data;l.$axios.defaults.headers.common.Authorization=`Bearer ${a}`,l.$store.isLogged=!0,l.$store.user=e,l.$store.permissions=(e.permissions||[]).map(w=>w.name),localStorage.setItem("tokenDio",a),localStorage.setItem("user",JSON.stringify(e)),l.$alert.success("Bienvenido ",e.name),l.$router.push("/")}).catch(i=>{l.$alert.error(i?.response?.data?.message||"Error de autenticación","Error")}).finally(()=>{m.value=!1})}return(i,e)=>(C(),k(z,{class:"login-layout"},{default:t(()=>[s(N,null,{default:t(()=>[s(D,{class:"full-height"},{default:t(()=>[e[10]||(e[10]=o("div",{class:"login-bg-overlay"},null,-1)),s(B,{onSubmit:Q,class:"login-wrap"},{default:t(()=>[s(_,{flat:"",bordered:"",class:"login-card"},{default:t(()=>[s(p,{class:"q-pt-lg text-center"},{default:t(()=>[s(I,{src:"logo.png",width:"110px",class:"q-mb-sm",ratio:"1",fit:"contain"}),e[4]||(e[4]=o("div",{class:"text-subtitle2 text-grey-7 brand-chip"},[c(" Dirección de Igualdad de Oportunidades "),o("b",null,"(DIO)"),c(" · Gobierno Autónomo Municipal de Oruro "),o("b",null,"(GAMO)")],-1))]),_:1}),s(b,{spaced:""}),s(p,{class:"q-pt-none"},{default:t(()=>[e[5]||(e[5]=o("div",{class:"text-h6 text-bold q-mb-xs"},"Iniciar sesión",-1)),e[6]||(e[6]=o("div",{class:"text-body2 text-grey-7 q-mb-md"}," Accede al panel de Administración usando tus credenciales. ",-1)),e[7]||(e[7]=o("div",{class:"q-mb-sm text-caption text-grey-7"},"Nombre de usuario",-1)),s(x,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),outlined:"",dense:"",placeholder:"Nombre de usuario",rules:[a=>!!a||"Ingrese su nombre de usuario"],class:"q-mb-md"},{prepend:t(()=>[s(g,{name:"account_circle",size:"18px"})]),_:1},8,["modelValue","rules"]),e[8]||(e[8]=o("div",{class:"q-mb-sm text-caption text-grey-7"},"Contraseña",-1)),s(x,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),outlined:"",dense:"",type:n.value?"text":"password",placeholder:"Contraseña",rules:[a=>!!a||"Ingrese su contraseña"]},{prepend:t(()=>[s(g,{name:"lock",size:"18px"})]),append:t(()=>[s(g,{name:n.value?"visibility":"visibility_off",size:"18px",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o("div",L,[s(O,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),label:"Recuérdame",color:"primary",dense:""},null,8,["modelValue"]),s(A),s(f,{flat:"",dense:"","no-caps":"",class:"text-weight-medium link-muted",label:"¿Olvidaste tu contraseña?"})]),s(f,{color:"primary",label:"Iniciar sesión",class:"full-width btnLogin","no-caps":"",unelevated:"",size:"16px",loading:m.value,type:"submit"},null,8,["loading"])]),_:1}),s(p,{class:"q-pt-none text-center"},{default:t(()=>[o("div",M,[e[9]||(e[9]=c(" ¿Eres usuario nuevo? ")),s(f,{flat:"",dense:"","no-caps":"",class:"text-weight-medium",label:"Regístrate"})]),s(b,{spaced:""}),o("div",E," © "+S(y.value)+" DIO · GAMO. Todos los derechos reservados. ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Y=V(G,[["__scopeId","data-v-b6b77d97"]]);export{Y as default};
