import{_ as y,c as m,o as n,w as p,a as r,b as t,Q as f,a6 as w,$ as _,f as x,d as b,a0 as l,a1 as g,a2 as v,t as a,Z as o}from"./index-CX7iFNk1.js";import{Q as k}from"./QSelect-BoS1tG2l.js";import{Q as u}from"./QMenu-BOtXKsfK.js";import{Q as C}from"./QSpinnerDots-BUfjDagN.js";import{Q as V}from"./QMarkupTable-BPnXl5AH.js";import{Q}from"./QPagination-Bf4viv_5.js";import{Q as P}from"./QPage-DusucgR0.js";import"./QItem-Cd4rxRao.js";import"./QItemLabel-CyyqkaQM.js";import"./format-CoeZ1Mr8.js";const q={name:"LineasTiempoFaltanEntregado",data(){return{loading:!1,search:"",page:1,perPage:10,rows:{data:[],current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}}},created(){this.fetchRows()},methods:{areaColor(c){return c.entregado?"positive":c.vencido?"negative":"grey-4"},areaTextColor(c){return c.entregado||c.vencido?"white":"black"},async fetchRows(){this.loading=!0;try{const e=(await this.$axios.get("/casos-linea-tiempo",{params:{q:this.search||"",page:this.page,per_page:this.perPage,deadline_days:365}})).data||{};this.rows={data:e.data||[],current_page:e.current_page||1,last_page:e.last_page||1,per_page:e.per_page||this.perPage,total:e.total||0,from:e.from||0,to:e.to||0},e.current_page&&(this.page=e.current_page)}catch(c){this.$q.notify({type:"negative",message:c?.response?.data?.message||"Error cargando datos"})}finally{this.loading=!1}},onSearch(){this.page=1,this.fetchRows()},clearSearch(){this.search="",this.onSearch()},goFirstPage(){this.page=1,this.fetchRows()},rowIndex(c){return(this.rows.from||0)+c}}},I={class:"row items-center q-col-gutter-md"},S={class:"col-12 col-md"},E={class:"col-auto"},T={class:"col-auto"},B={key:0},D={class:"text-right"},N={class:"text-no-wrap"},R={class:"row items-center q-gutter-xs"},z={class:"text-weight-medium"},M={class:"text-caption text-grey-7"},F={class:"text-weight-medium ellipsis"},L={key:0,class:"text-caption text-grey-7"},Y={class:"row items-center q-gutter-sm"},U={class:"text-caption"},Z={class:"text-grey-7"},j={key:0,class:"text-negative"},A={key:1,class:"text-grey-7"},G={class:"row items-center q-gutter-sm"},H={class:"text-caption"},J={class:"text-grey-7"},K={key:0,class:"text-negative"},O={key:1,class:"text-grey-7"},W={class:"row items-center q-gutter-sm"},X={class:"text-caption"},$={class:"text-grey-7"},ee={key:0,class:"text-negative"},te={key:1,class:"text-grey-7"},se={class:"text-no-wrap"},oe={key:1},ae={key:1},ne={key:2},le={colspan:"7",class:"text-center"},ie={class:"row items-center justify-between q-mt-md"},de={class:"text-caption text-grey-7"};function re(c,e,ce,pe,i,d){return n(),m(P,{class:"q-pa-md"},{default:p(()=>[r(f,{flat:"",bordered:"",class:"q-pa-sm q-mb-md"},{default:p(()=>[t("div",I,[t("div",S,[r(w,{modelValue:i.search,"onUpdate:modelValue":e[0]||(e[0]=s=>i.search=s),outlined:"",dense:"",debounce:"400",placeholder:"Buscar por N° de caso, denunciante, zona…",onInput:d.onSearch},{prepend:p(()=>[r(b,{name:"search"})]),append:p(()=>[i.search?(n(),m(x,{key:0,flat:"",dense:"",round:"",icon:"close",onClick:d.clearSearch},null,8,["onClick"])):_("",!0)]),_:1},8,["modelValue","onInput"])]),t("div",E,[r(k,{modelValue:i.perPage,"onUpdate:modelValue":e[1]||(e[1]=s=>i.perPage=s),options:[10,20,50],dense:"",outlined:"",style:{width:"120px"},label:"Por página",onInput:d.goFirstPage},null,8,["modelValue","onInput"])]),t("div",T,[r(x,{color:"primary",icon:"refresh",label:"Actualizar","no-caps":"",loading:i.loading,onClick:d.fetchRows},null,8,["loading","onClick"])])])]),_:1}),r(V,{flat:"",bordered:"",dense:"",class:"table--wrap"},{default:p(()=>[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",{style:{width:"56px"}},"#"),t("th",{style:{"min-width":"140px"}},"Nº Caso"),t("th",{style:{"min-width":"220px"}},"Denunciante"),t("th",{style:{"min-width":"240px"}},"Psicológico"),t("th",{style:{"min-width":"240px"}},"Social"),t("th",{style:{"min-width":"240px"}},"Legal"),t("th",{style:{"min-width":"110px"}},"Zona")])],-1)),!i.loading&&i.rows.data.length?(n(),l("tbody",B,[(n(!0),l(g,null,v(i.rows.data,(s,h)=>(n(),l("tr",{key:s.id,class:"hover-row"},[t("td",D,a(d.rowIndex(h)),1),t("td",N,[t("div",R,[r(u,{dense:"",square:"",color:"blue-1","text-color":"blue-9"},{default:p(()=>[o(a(s.tipo||"—"),1)]),_:2},1024),t("div",z,a(s.caso_numero||"—"),1)]),t("div",M,"Creado: "+a(s.creado_dmY),1)]),t("td",null,[t("div",F,a(s.denunciante_nombre||"—"),1),s.denunciante_nro?(n(),l("div",L,"CI: "+a(s.denunciante_nro),1)):_("",!0)]),t("td",null,[t("div",Y,[r(u,{dense:"",color:d.areaColor(s.psico),"text-color":d.areaTextColor(s.psico)},{default:p(()=>[o(a(s.psico.entregado?"Entregado":s.psico.vencido?"Vencido":"Pendiente"),1)]),_:2},1032,["color","text-color"]),t("div",U,[s.psico.entregado?(n(),l(g,{key:0},[e[3]||(e[3]=o(" Entregado en: ")),t("b",null,a(s.psico.dias_hasta_entrega),1),e[4]||(e[4]=o(" días ")),t("span",Z," ("+a(s.psico.entrego_dmY)+")",1)],64)):(n(),l(g,{key:1},[s.psico.vencido?(n(),l("span",j,[e[5]||(e[5]=o(" Vencido: ")),t("b",null,a(Math.abs(s.psico.dias_restantes)),1),e[6]||(e[6]=o(" días "))])):(n(),l("span",A,[e[7]||(e[7]=o(" Dias: ")),t("b",null,a(s.psico.dias_restantes),1),e[8]||(e[8]=o(" días "))]))],64))])])]),t("td",null,[t("div",G,[r(u,{dense:"",color:d.areaColor(s.social),"text-color":d.areaTextColor(s.social)},{default:p(()=>[o(a(s.social.entregado?"Entregado":s.social.vencido?"Vencido":"Pendiente"),1)]),_:2},1032,["color","text-color"]),t("div",H,[s.social.entregado?(n(),l(g,{key:0},[e[9]||(e[9]=o(" Entregado en: ")),t("b",null,a(s.social.dias_hasta_entrega),1),e[10]||(e[10]=o(" días ")),t("span",J," ("+a(s.social.entrego_dmY)+")",1)],64)):(n(),l(g,{key:1},[s.social.vencido?(n(),l("span",K,[e[11]||(e[11]=o(" Vencido: ")),t("b",null,a(Math.abs(s.social.dias_restantes)),1),e[12]||(e[12]=o(" días "))])):(n(),l("span",O,[e[13]||(e[13]=o(" Dias: ")),t("b",null,a(s.social.dias_restantes),1),e[14]||(e[14]=o(" días "))]))],64))])])]),t("td",null,[t("div",W,[r(u,{dense:"",color:d.areaColor(s.legal),"text-color":d.areaTextColor(s.legal)},{default:p(()=>[o(a(s.legal.entregado?"Entregado":s.legal.vencido?"Vencido":"Pendiente"),1)]),_:2},1032,["color","text-color"]),t("div",X,[s.legal.entregado?(n(),l(g,{key:0},[e[15]||(e[15]=o(" Entregado en: ")),t("b",null,a(s.legal.dias_hasta_entrega),1),e[16]||(e[16]=o(" días ")),t("span",$," ("+a(s.legal.entrego_dmY)+")",1)],64)):(n(),l(g,{key:1},[s.legal.vencido?(n(),l("span",ee,[e[17]||(e[17]=o(" Vencido: ")),t("b",null,a(Math.abs(s.legal.dias_restantes)),1),e[18]||(e[18]=o(" días "))])):(n(),l("span",te,[e[19]||(e[19]=o(" Dias: ")),t("b",null,a(s.legal.dias_restantes),1),e[20]||(e[20]=o(" días "))]))],64))])])]),t("td",se,[s.caso_zona?(n(),m(u,{key:0,dense:"",color:"teal-1","text-color":"teal-10"},{default:p(()=>[o(a(s.caso_zona),1)]),_:2},1024)):(n(),l("span",oe,"—"))])]))),128))])):!i.loading&&!i.rows.data.length?(n(),l("tbody",ae,e[21]||(e[21]=[t("tr",null,[t("td",{colspan:"7",class:"text-center text-grey"},"Sin resultados")],-1)]))):(n(),l("tbody",ne,[t("tr",null,[t("td",le,[r(C,{size:"24px",class:"q-mr-sm"}),e[22]||(e[22]=o(" Cargando…"))])])]))]),_:1}),t("div",ie,[t("div",de,[e[24]||(e[24]=o(" Mostrando ")),t("b",null,a(i.rows.from||0),1),e[25]||(e[25]=o(" – ")),t("b",null,a(i.rows.to||0),1),e[26]||(e[26]=o(" de ")),t("b",null,a(i.rows.total||0),1)]),r(Q,{modelValue:i.page,"onUpdate:modelValue":e[2]||(e[2]=s=>i.page=s),max:i.rows.last_page||1,"max-pages":"10","boundary-numbers":"","direction-links":"",onClick:d.fetchRows},null,8,["modelValue","max","onClick"])])]),_:1})}const ve=y(q,[["render",re],["__scopeId","data-v-9d37c0af"]]);export{ve as default};
