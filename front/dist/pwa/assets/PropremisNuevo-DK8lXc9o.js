import{_ as M,Y as E,c as w,o as _,w as s,a0 as b,a as n,b as d,f as m,ac as I,Q as r,e as c,d as g,a3 as h,a6 as i,$ as U,a1 as k,a2 as R,a7 as C,a9 as f}from"./index-De6rFb63.js";import{Q as p}from"./QSelect-B4qxCcaP.js";import{Q as P}from"./QMarkupTable-C5doGxGb.js";import{Q as x}from"./QExpansionItem-B827L9LJ.js";import{Q as S}from"./QForm-DCo0W5qd.js";import{Q as F}from"./QPage-J0181FJh.js";import{M as N}from"./MapPicker-DD68feFR.js";const O={name:"CasoNuevoPROPREMI",components:{MapPicker:N},props:{casoId:{type:[Number,String],default:null},editable:{type:Boolean,default:!1}},data(){return{loading:!1,recognition:null,activeField:null,isListening:!1,oruroCenter:[-17.9667,-67.1167],psicologos:[],abogados:[],sociales:[],sexos:[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"Otro",value:"Otro"}],estadosCiviles:["Soltero/a","Casado/a","Divorciado/a","Separado/a","Viudo/a","Unión libre","Otro"],f:{tipo:"PROPREMI",principal:"",caso_numero:"",caso_fecha_hecho:"",caso_lugar_hecho:"",caso_direccion:"",caso_tipologia:"",caso_descripcion:"",violencia_fisica:!1,violencia_psicologica:!1,violencia_sexual:!1,violencia_economica:!1,violencia_patrimonial:!1,violencia_simbolica:!1,violencia_institucional:!1,denunciantes:[{denunciante_nombres:"",denunciante_paterno:"",denunciante_materno:"",denunciante_documento:"Carnet de identidad",denunciante_nro:"",denunciante_sexo:"",denunciante_lugar_nacimiento:"",denunciante_fecha_nacimiento:"",denunciante_edad:"",denunciante_telefono:"",denunciante_residencia:"",denunciante_estado_civil:"",denunciante_relacion:"",denunciante_grado:"",denunciante_trabaja:!1,denunciante_ocupacion:"",denunciante_idioma:"",denunciante_domicilio_actual:"",latitud:null,longitud:null}],denunciados:[{denunciado_nombres:"",denunciado_paterno:"",denunciado_materno:"",denunciado_documento:"Carnet de identidad",denunciado_nro:"",denunciado_sexo:"",denunciado_lugar_nacimiento:"",denunciado_fecha_nacimiento:"",denunciado_edad:"",denunciado_telefono:"",denunciado_residencia:"",denunciado_estado_civil:"",denunciado_relacion:"",denunciado_grado:"",denunciado_ocupacion:"",denunciado_idioma:"",denunciado_domicilio_actual:"",denunciado_latitud:null,denunciado_longitud:null}],familiares:[],menores:[],psicologica_user_id:null,trabajo_social_user_id:null,legal_user_id:null,documento_fotocopia_carnet_denunciante:"0",documento_fotocopia_carnet_denunciado:"0",documento_placas_fotograficas_domicilio_denunciante:"0",documento_croquis_direccion_denunciado:"0"}}},computed:{denunciantePos:{get(){const a=this.f.denunciantes?.[0]||{};return{latitud:a.latitud,longitud:a.longitud}},set(a){this.f.denunciantes?.length&&(this.f.denunciantes[0].latitud=a?.latitud??a?.lat??null,this.f.denunciantes[0].longitud=a?.longitud??a?.lng??null)}}},mounted(){if(this.$axios.get("/usuariosRole").then(a=>{this.psicologos=a.data.psicologos||[],this.abogados=a.data.abogados||[],this.sociales=a.data.sociales||[]}).catch(()=>this.$alert?.error?.("No se pudo cargar los usuarios por rol")),"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const a=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new a,this.recognition.lang="es-ES",this.recognition.interimResults=!1,this.recognition.continuous=!1,this.recognition.onstart=()=>{this.isListening=!0},this.recognition.onend=()=>{this.isListening=!1,this.activeField=null},this.recognition.onresult=e=>{const V=e.results[0][0].transcript;this.activeField==="caso_descripcion"&&(this.f.caso_descripcion=(this.f.caso_descripcion?this.f.caso_descripcion+" ":"")+V)}}this.getCaso()},methods:{req(a){return!!a||"Requerido"},addMenor(){this.f.menores.push({nombres:"",edad_anios:null,edad_meses:null,sexo:"",cert_nac:!1,estudia:!1,ultimo_curso:"",tipo_trabajo:""})},addFam(){this.f.familiares.push({familiar_nombres:"",familiar_paterno:"",familiar_materno:"",familiar_parentesco:"",familiar_edad:null,familiar_estado_civil:"",familiar_ocupacion:"",familiar_telefono:""})},toggleRecognition(a){if(!this.recognition){this.$q.notify({color:"negative",message:"El navegador no soporta micrófono."});return}if(this.isListening&&this.activeField===a){try{this.recognition.stop()}catch{}return}if(this.isListening)try{this.recognition.stop()}catch{}this.activeField=a;try{this.recognition.start()}catch{}},resetForm(){const a=this.$options.data().f;this.f=JSON.parse(JSON.stringify(a)),this.$q.notify({type:"info",message:"Formulario reiniciado"})},getCaso(){!this.editable||!this.casoId||(this.loading=!0,this.$axios.get(`/casos/${this.casoId}`).then(a=>{const e=a.data||{};(!e.denunciantes||!e.denunciantes.length)&&(e.denunciantes=[this.$options.data().f.denunciantes[0]]),(!e.denunciados||!e.denunciados.length)&&(e.denunciados=[this.$options.data().f.denunciados[0]]),e.familiares||(e.familiares=[]),e.menores||(e.menores=[]),this.f={...this.f,...e,tipo:"PROPREMI"}}).catch(()=>this.$alert?.error?.("No se pudo cargar el caso")).finally(()=>{this.loading=!1}))},async save(){if(!this.f.principal||!this.f.denunciantes[0].denunciante_nombres){this.$alert?.error?.("Tipología principal y nombre del denunciante son obligatorios");return}this.loading=!0;try{const a=await this.$axios.post("/casos",{...this.f,tipo:"PROPREMI"}),e=a?.data?.id||a?.data?.caso?.id;this.$alert?.success?.("Caso PROPREMI creado"),e?this.$router.push(`/casos/${e}`):this.$router.push("/casos?tipo=PROPREMI")}catch(a){this.$alert?.error?.(a?.response?.data?.message||"No se pudo crear el caso PROPREMI")}finally{this.loading=!1}},async update(){if(!this.f.principal){this.$alert?.error?.("La tipología principal es obligatoria");return}this.loading=!0;try{await this.$axios.put(`/casos/${this.casoId}`,this.f),this.$alert?.success?.("Caso PROPREMI actualizado"),this.$router.push(`/casos/${this.casoId}`)}catch(a){this.$alert?.error?.(a?.response?.data?.message||"No se pudo actualizar el caso PROPREMI")}finally{this.loading=!1}},autoEdad(a){const e=a==="denunciado"?"denunciados":"denunciantes",V=this.f[e]?.[0],y=V?.[`${a}_fecha_nacimiento`];if(!y)return;const o=Math.floor((new Date-new Date(y))/(1e3*60*60*24*365.25));V[`${a}_edad`]=Number.isFinite(o)?o:""}}},D={key:0,class:"toolbar q-pa-sm bg-white row items-center q-gutter-sm shadow-1"},Q={class:"col-auto row q-gutter-sm"},j={key:1,class:"q-mb-sm text-right"},L={class:"row q-col-gutter-md"},A={class:"col-12 col-md-3"},T={class:"col-12 col-md-4"},B={class:"col-6 col-md-3"},z={class:"col-6 col-md-2"},G={class:"col-12 col-md-8"},J={class:"col-12 col-md-2"},Y={class:"col-12"},H={class:"q-mb-sm"},K={class:"text-center"},W={class:"text-center"},X={class:"text-center"},Z={key:0,class:"text-grey text-caption"},$={class:"q-mb-sm"},ee={class:"row q-col-gutter-xs"},le={class:"col"},oe={class:"col-6 col-md-3"},ne={class:"col-6 col-md-3"},de={class:"text-center"},ie={key:0,class:"text-grey text-caption"},ae={class:"row q-col-gutter-md"},se={class:"col-12 col-md-3"},te={class:"col-6 col-md-3"},ue={class:"col-6 col-md-3"},ce={class:"col-6 col-md-3"},re={class:"col-6 col-md-3"},me={class:"col-6 col-md-3"},_e={class:"col-12 col-md-3"},fe={class:"col-12 col-md-3"},pe={class:"col-6 col-md-2"},Ve={class:"col-6 col-md-3"},be={class:"col-6 col-md-3"},ge={class:"col-6 col-md-3"},ve={class:"col-6 col-md-3"},he={class:"col-6 col-md-3"},Ue={class:"col-6 col-md-3"},xe={class:"col-12 col-md-6"},ye={class:"col-12 col-md-6"},we={class:"row q-col-gutter-md"},Ce={class:"col-12 col-md-3"},ke={class:"col-6 col-md-3"},Re={class:"col-6 col-md-3"},Pe={class:"col-6 col-md-3"},qe={class:"col-6 col-md-3"},Me={class:"col-6 col-md-3"},Ee={class:"col-12 col-md-3"},Ie={class:"col-12 col-md-3"},Se={class:"col-6 col-md-2"},Fe={class:"col-6 col-md-3"},Ne={class:"col-6 col-md-3"},Oe={class:"col-12 col-md-3"},De={class:"col-12 col-md-3"},Qe={class:"col-12 col-md-3"},je={class:"col-12 col-md-3"},Le={class:"col-12 col-md-3"},Ae={class:"col-12 col-md-3"},Te={class:"col-12 col-md-6"},Be={class:"row q-col-gutter-md"},ze={class:"col-6 col-md-3"},Ge={class:"col-6 col-md-3"},Je={class:"col-6 col-md-3"},Ye={class:"col-6 col-md-3"},He={class:"col-6 col-md-3"},Ke={class:"col-6 col-md-3"},We={class:"col-6 col-md-3"},Xe={class:"col-12 col-md-9"},Ze={class:"row q-col-gutter-md"},$e={class:"col-12 col-md-3"},el={class:"col-12 col-md-3"},ll={class:"col-12 col-md-3"},ol={class:"col-12 col-md-3"},nl={class:"row q-col-gutter-md"},dl={class:"col-12 col-md-4"},il={class:"col-12 col-md-4"},al={class:"col-12 col-md-4"},sl={class:"text-right q-mb-lg"};function tl(a,e,V,y,o,u){const q=E("MapPicker");return _(),w(F,{class:"q-pa-md bg-grey-2"},{default:s(()=>[V.editable?(_(),b("div",j,[n(m,{flat:"",color:"primary",icon:"refresh",label:"Recargar",onClick:u.getCaso,class:"q-mr-sm"},null,8,["onClick"]),n(m,{color:"primary",icon:"save",label:"Actualizar",loading:o.loading,onClick:u.update},null,8,["loading","onClick"])])):(_(),b("div",D,[e[61]||(e[61]=d("div",{class:"col"},[d("div",{class:"text-h6 text-weight-bold"},"Registro de Atención y/o Denuncia — PROPREMI"),d("div",{class:"text-caption text-grey-7"},"SID · Programa Municipal PROPREMI")],-1)),d("div",Q,[n(m,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:u.resetForm},null,8,["onClick"]),n(m,{color:"primary",icon:"save",label:"Guardar",loading:o.loading,onClick:u.save},null,8,["loading","onClick"])])])),n(S,{class:"q-mt-lg",onSubmit:I(u.save,["prevent"])},{default:s(()=>[n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(c,{class:"row items-center"},{default:s(()=>[n(g,{name:"assignment",class:"q-mr-sm"}),e[62]||(e[62]=d("div",{class:"text-subtitle1 text-weight-medium"},"1) Datos generales",-1))]),_:1}),n(h),n(c,null,{default:s(()=>[d("div",L,[d("div",A,[n(i,{modelValue:o.f.caso_fecha_hecho,"onUpdate:modelValue":e[0]||(e[0]=l=>o.f.caso_fecha_hecho=l),type:"date",dense:"",outlined:"",label:"Fecha de atención/registro"},null,8,["modelValue"])]),d("div",T,[n(i,{modelValue:o.f.principal,"onUpdate:modelValue":e[1]||(e[1]=l=>o.f.principal=l),dense:"",outlined:"",clearable:"",rules:[u.req],label:"Tipología principal (p. ej., Apoyo Integral) *"},null,8,["modelValue","rules"])]),d("div",B,[n(i,{modelValue:o.f.caso_lugar_hecho,"onUpdate:modelValue":e[2]||(e[2]=l=>o.f.caso_lugar_hecho=l),dense:"",outlined:"",clearable:"",label:"U.E. / Colegio"},null,8,["modelValue"])]),d("div",z,[n(i,{modelValue:o.f.caso_numero,"onUpdate:modelValue":e[3]||(e[3]=l=>o.f.caso_numero=l),dense:"",outlined:"",clearable:"",label:"N° de caso",readonly:""},null,8,["modelValue"])]),d("div",G,[n(i,{modelValue:o.f.caso_direccion,"onUpdate:modelValue":e[4]||(e[4]=l=>o.f.caso_direccion=l),dense:"",outlined:"",clearable:"",label:"Domicilio / Dirección (para hoja de ruta)"},null,8,["modelValue"])]),d("div",J,[n(m,{outline:"",label:"Buscar en mapa",onClick:e[5]||(e[5]=l=>a.$refs.denMap?.geocodeAndFly(o.f.caso_direccion))})]),d("div",Y,[n(q,{modelValue:u.denunciantePos,"onUpdate:modelValue":e[6]||(e[6]=l=>u.denunciantePos=l),center:o.oruroCenter,address:o.f.caso_direccion,country:"bo",ref:"denMap"},null,8,["modelValue","center","address"])])])]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(x,{icon:"child_care","dense-toggle":"","expand-separator":"",label:"2) Datos del/los afectado(s)","header-class":"text-subtitle1"},{default:s(()=>[n(r,null,{default:s(()=>[n(c,null,{default:s(()=>[d("div",H,[n(m,{dense:"",icon:"add",color:"primary",label:"Agregar afectado",onClick:u.addMenor},null,8,["onClick"])]),n(P,{dense:"",flat:"",bordered:""},{default:s(()=>[e[63]||(e[63]=d("thead",null,[d("tr",{class:"bg-blue-1 text-blue-10"},[d("th",null,"Nombres y apellidos"),d("th",{style:{width:"90px"}},"Edad (años)"),d("th",{style:{width:"90px"}},"Edad (meses)"),d("th",{style:{width:"110px"}},"Sexo"),d("th",{style:{width:"80px"}},"C. Nac"),d("th",{style:{width:"80px"}},"Estudia"),d("th",null,"Último curso"),d("th",null,"Tipo de trabajo"),d("th",{style:{width:"56px"}})])],-1)),d("tbody",null,[(_(!0),b(k,null,R(o.f.menores,(l,v)=>(_(),b("tr",{key:v},[d("td",null,[n(i,{modelValue:l.nombres,"onUpdate:modelValue":t=>l.nombres=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.edad_anios,"onUpdate:modelValue":t=>l.edad_anios=t,modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.edad_meses,"onUpdate:modelValue":t=>l.edad_meses=t,modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(p,{modelValue:l.sexo,"onUpdate:modelValue":t=>l.sexo=t,options:o.sexos,"emit-value":"","map-options":"",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","options"])]),d("td",K,[n(C,{modelValue:l.cert_nac,"onUpdate:modelValue":t=>l.cert_nac=t},null,8,["modelValue","onUpdate:modelValue"])]),d("td",W,[n(C,{modelValue:l.estudia,"onUpdate:modelValue":t=>l.estudia=t},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.ultimo_curso,"onUpdate:modelValue":t=>l.ultimo_curso=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.tipo_trabajo,"onUpdate:modelValue":t=>l.tipo_trabajo=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",X,[n(m,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:t=>o.f.menores.splice(v,1)},null,8,["onClick"])])]))),128))])]),_:1}),o.f.menores.length?U("",!0):(_(),b("div",Z,"Sin afectados registrados"))]),_:1})]),_:1})]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(x,{icon:"diversity_3","dense-toggle":"","expand-separator":"",label:"3) Datos del grupo familiar","header-class":"text-subtitle1"},{default:s(()=>[n(r,null,{default:s(()=>[n(c,null,{default:s(()=>[d("div",$,[n(m,{dense:"",icon:"add",color:"primary",label:"Agregar integrante",onClick:u.addFam},null,8,["onClick"])]),n(P,{dense:"",flat:"",bordered:""},{default:s(()=>[e[64]||(e[64]=d("thead",null,[d("tr",{class:"bg-blue-1 text-blue-10"},[d("th",null,"Nombres y apellidos"),d("th",null,"Parentesco"),d("th",{style:{width:"100px"}},"Edad"),d("th",{style:{width:"120px"}},"Estado civil"),d("th",null,"Ocupación"),d("th",{style:{width:"140px"}},"Celular"),d("th",{style:{width:"56px"}})])],-1)),d("tbody",null,[(_(!0),b(k,null,R(o.f.familiares,(l,v)=>(_(),b("tr",{key:"g"+v},[d("td",ee,[d("div",le,[n(i,{modelValue:l.familiar_nombres,"onUpdate:modelValue":t=>l.familiar_nombres=t,dense:"",outlined:"",placeholder:"Nombres"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",oe,[n(i,{modelValue:l.familiar_paterno,"onUpdate:modelValue":t=>l.familiar_paterno=t,dense:"",outlined:"",placeholder:"Paterno"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",ne,[n(i,{modelValue:l.familiar_materno,"onUpdate:modelValue":t=>l.familiar_materno=t,dense:"",outlined:"",placeholder:"Materno"},null,8,["modelValue","onUpdate:modelValue"])])]),d("td",null,[n(i,{modelValue:l.familiar_parentesco,"onUpdate:modelValue":t=>l.familiar_parentesco=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.familiar_edad,"onUpdate:modelValue":t=>l.familiar_edad=t,modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.familiar_estado_civil,"onUpdate:modelValue":t=>l.familiar_estado_civil=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.familiar_ocupacion,"onUpdate:modelValue":t=>l.familiar_ocupacion=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[n(i,{modelValue:l.familiar_telefono,"onUpdate:modelValue":t=>l.familiar_telefono=t,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),d("td",de,[n(m,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:t=>o.f.familiares.splice(v,1)},null,8,["onClick"])])]))),128))])]),_:1}),o.f.familiares.length?U("",!0):(_(),b("div",ie,"Sin integrantes registrados"))]),_:1})]),_:1})]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(x,{icon:"person_off","dense-toggle":"","expand-separator":"",label:"4) Datos del denunciado/a","header-class":"text-subtitle1"},{default:s(()=>[n(r,null,{default:s(()=>[n(c,null,{default:s(()=>[d("div",ae,[d("div",se,[n(i,{modelValue:o.f.denunciados[0].denunciado_nombres,"onUpdate:modelValue":e[7]||(e[7]=l=>o.f.denunciados[0].denunciado_nombres=l),dense:"",outlined:"",clearable:"",label:"Nombres"},null,8,["modelValue"])]),d("div",te,[n(i,{modelValue:o.f.denunciados[0].denunciado_paterno,"onUpdate:modelValue":e[8]||(e[8]=l=>o.f.denunciados[0].denunciado_paterno=l),dense:"",outlined:"",clearable:"",label:"Ap. paterno"},null,8,["modelValue"])]),d("div",ue,[n(i,{modelValue:o.f.denunciados[0].denunciado_materno,"onUpdate:modelValue":e[9]||(e[9]=l=>o.f.denunciados[0].denunciado_materno=l),dense:"",outlined:"",clearable:"",label:"Ap. materno"},null,8,["modelValue"])]),d("div",ce,[n(p,{modelValue:o.f.denunciados[0].denunciado_sexo,"onUpdate:modelValue":e[10]||(e[10]=l=>o.f.denunciados[0].denunciado_sexo=l),options:o.sexos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Sexo"},null,8,["modelValue","options"])]),d("div",re,[n(p,{modelValue:o.f.denunciados[0].denunciado_documento,"onUpdate:modelValue":e[11]||(e[11]=l=>o.f.denunciados[0].denunciado_documento=l),options:a.$documentos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Documento"},null,8,["modelValue","options"])]),d("div",me,[n(i,{modelValue:o.f.denunciados[0].denunciado_nro,"onUpdate:modelValue":e[12]||(e[12]=l=>o.f.denunciados[0].denunciado_nro=l),dense:"",outlined:"",clearable:"",label:"N° documento"},null,8,["modelValue"])]),d("div",_e,[n(i,{modelValue:o.f.denunciados[0].denunciado_fecha_nacimiento,"onUpdate:modelValue":[e[13]||(e[13]=l=>o.f.denunciados[0].denunciado_fecha_nacimiento=l),e[14]||(e[14]=l=>u.autoEdad("denunciado"))],type:"date",dense:"",outlined:"",label:"Fecha de nacimiento"},null,8,["modelValue"])]),d("div",fe,[n(i,{modelValue:o.f.denunciados[0].denunciado_lugar_nacimiento,"onUpdate:modelValue":e[15]||(e[15]=l=>o.f.denunciados[0].denunciado_lugar_nacimiento=l),dense:"",outlined:"",clearable:"",label:"Lugar de nacimiento"},null,8,["modelValue"])]),d("div",pe,[n(i,{modelValue:o.f.denunciados[0].denunciado_edad,"onUpdate:modelValue":e[16]||(e[16]=l=>o.f.denunciados[0].denunciado_edad=l),modelModifiers:{number:!0},type:"number",dense:"",outlined:"",label:"Edad"},null,8,["modelValue"])]),d("div",Ve,[n(i,{modelValue:o.f.denunciados[0].denunciado_residencia,"onUpdate:modelValue":e[17]||(e[17]=l=>o.f.denunciados[0].denunciado_residencia=l),dense:"",outlined:"",clearable:"",label:"Residencia habitual"},null,8,["modelValue"])]),d("div",be,[n(i,{modelValue:o.f.denunciados[0].denunciado_estado_civil,"onUpdate:modelValue":e[18]||(e[18]=l=>o.f.denunciados[0].denunciado_estado_civil=l),dense:"",outlined:"",clearable:"",label:"Estado civil"},null,8,["modelValue"])]),d("div",ge,[n(i,{modelValue:o.f.denunciados[0].denunciado_idioma,"onUpdate:modelValue":e[19]||(e[19]=l=>o.f.denunciados[0].denunciado_idioma=l),dense:"",outlined:"",clearable:"",label:"Idioma"},null,8,["modelValue"])]),d("div",ve,[n(i,{modelValue:o.f.denunciados[0].denunciado_grado,"onUpdate:modelValue":e[20]||(e[20]=l=>o.f.denunciados[0].denunciado_grado=l),dense:"",outlined:"",clearable:"",label:"Grado de instrucción"},null,8,["modelValue"])]),d("div",he,[n(i,{modelValue:o.f.denunciados[0].denunciado_ocupacion,"onUpdate:modelValue":e[21]||(e[21]=l=>o.f.denunciados[0].denunciado_ocupacion=l),dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue"])]),d("div",Ue,[n(i,{modelValue:o.f.denunciados[0].denunciado_telefono,"onUpdate:modelValue":e[22]||(e[22]=l=>o.f.denunciados[0].denunciado_telefono=l),dense:"",outlined:"",clearable:"",label:"Teléfono"},null,8,["modelValue"])]),d("div",xe,[n(i,{modelValue:o.f.denunciados[0].denunciado_domicilio_actual,"onUpdate:modelValue":e[23]||(e[23]=l=>o.f.denunciados[0].denunciado_domicilio_actual=l),dense:"",outlined:"",clearable:"",label:"Dirección actual"},null,8,["modelValue"])]),d("div",ye,[n(i,{modelValue:o.f.denunciados[0].denunciado_relacion,"onUpdate:modelValue":e[24]||(e[24]=l=>o.f.denunciados[0].denunciado_relacion=l),dense:"",outlined:"",clearable:"",label:"Relación con la denunciante"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(x,{icon:"person","dense-toggle":"","expand-separator":"",label:"5) Datos del/la denunciante","header-class":"text-subtitle1","default-opened":""},{default:s(()=>[n(r,null,{default:s(()=>[n(c,null,{default:s(()=>[d("div",we,[d("div",Ce,[n(i,{modelValue:o.f.denunciantes[0].denunciante_nombres,"onUpdate:modelValue":e[25]||(e[25]=l=>o.f.denunciantes[0].denunciante_nombres=l),dense:"",outlined:"",clearable:"",rules:[u.req],label:"Nombres *"},null,8,["modelValue","rules"])]),d("div",ke,[n(i,{modelValue:o.f.denunciantes[0].denunciante_paterno,"onUpdate:modelValue":e[26]||(e[26]=l=>o.f.denunciantes[0].denunciante_paterno=l),dense:"",outlined:"",clearable:"",label:"Ap. paterno"},null,8,["modelValue"])]),d("div",Re,[n(i,{modelValue:o.f.denunciantes[0].denunciante_materno,"onUpdate:modelValue":e[27]||(e[27]=l=>o.f.denunciantes[0].denunciante_materno=l),dense:"",outlined:"",clearable:"",label:"Ap. materno"},null,8,["modelValue"])]),d("div",Pe,[n(p,{modelValue:o.f.denunciantes[0].denunciante_sexo,"onUpdate:modelValue":e[28]||(e[28]=l=>o.f.denunciantes[0].denunciante_sexo=l),options:o.sexos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Sexo"},null,8,["modelValue","options"])]),d("div",qe,[n(p,{modelValue:o.f.denunciantes[0].denunciante_documento,"onUpdate:modelValue":e[29]||(e[29]=l=>o.f.denunciantes[0].denunciante_documento=l),options:a.$documentos,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Documento"},null,8,["modelValue","options"])]),d("div",Me,[n(i,{modelValue:o.f.denunciantes[0].denunciante_nro,"onUpdate:modelValue":e[30]||(e[30]=l=>o.f.denunciantes[0].denunciante_nro=l),dense:"",outlined:"",clearable:"",label:"N° documento"},null,8,["modelValue"])]),d("div",Ee,[n(i,{modelValue:o.f.denunciantes[0].denunciante_fecha_nacimiento,"onUpdate:modelValue":[e[31]||(e[31]=l=>o.f.denunciantes[0].denunciante_fecha_nacimiento=l),e[32]||(e[32]=l=>u.autoEdad("denunciante"))],type:"date",dense:"",outlined:"",label:"Fecha de nacimiento"},null,8,["modelValue"])]),d("div",Ie,[n(i,{modelValue:o.f.denunciantes[0].denunciante_lugar_nacimiento,"onUpdate:modelValue":e[33]||(e[33]=l=>o.f.denunciantes[0].denunciante_lugar_nacimiento=l),dense:"",outlined:"",clearable:"",label:"Lugar de nacimiento"},null,8,["modelValue"])]),d("div",Se,[n(i,{modelValue:o.f.denunciantes[0].denunciante_edad,"onUpdate:modelValue":e[34]||(e[34]=l=>o.f.denunciantes[0].denunciante_edad=l),modelModifiers:{number:!0},type:"number",dense:"",outlined:"",label:"Edad"},null,8,["modelValue"])]),d("div",Fe,[n(i,{modelValue:o.f.denunciantes[0].denunciante_residencia,"onUpdate:modelValue":e[35]||(e[35]=l=>o.f.denunciantes[0].denunciante_residencia=l),dense:"",outlined:"",clearable:"",label:"Residencia habitual"},null,8,["modelValue"])]),d("div",Ne,[n(p,{modelValue:o.f.denunciantes[0].denunciante_estado_civil,"onUpdate:modelValue":e[36]||(e[36]=l=>o.f.denunciantes[0].denunciante_estado_civil=l),options:o.estadosCiviles,dense:"",outlined:"",label:"Estado civil"},null,8,["modelValue","options"])]),d("div",Oe,[n(i,{modelValue:o.f.denunciantes[0].denunciante_relacion,"onUpdate:modelValue":e[37]||(e[37]=l=>o.f.denunciantes[0].denunciante_relacion=l),dense:"",outlined:"",clearable:"",label:"Relación con el denunciado/a"},null,8,["modelValue"])]),d("div",De,[n(i,{modelValue:o.f.denunciantes[0].denunciante_grado,"onUpdate:modelValue":e[38]||(e[38]=l=>o.f.denunciantes[0].denunciante_grado=l),dense:"",outlined:"",clearable:"",label:"Grado de instrucción"},null,8,["modelValue"])]),d("div",Qe,[n(C,{modelValue:o.f.denunciantes[0].denunciante_trabaja,"onUpdate:modelValue":e[39]||(e[39]=l=>o.f.denunciantes[0].denunciante_trabaja=l),label:"Trabaja"},null,8,["modelValue"])]),d("div",je,[n(i,{modelValue:o.f.denunciantes[0].denunciante_ocupacion,"onUpdate:modelValue":e[40]||(e[40]=l=>o.f.denunciantes[0].denunciante_ocupacion=l),dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue"])]),d("div",Le,[n(i,{modelValue:o.f.denunciantes[0].denunciante_idioma,"onUpdate:modelValue":e[41]||(e[41]=l=>o.f.denunciantes[0].denunciante_idioma=l),dense:"",outlined:"",clearable:"",label:"Idioma"},null,8,["modelValue"])]),d("div",Ae,[n(i,{modelValue:o.f.denunciantes[0].denunciante_telefono,"onUpdate:modelValue":e[42]||(e[42]=l=>o.f.denunciantes[0].denunciante_telefono=l),dense:"",outlined:"",clearable:"",label:"Teléfono de referencia"},null,8,["modelValue"])]),d("div",Te,[n(i,{modelValue:o.f.denunciantes[0].denunciante_domicilio_actual,"onUpdate:modelValue":e[43]||(e[43]=l=>o.f.denunciantes[0].denunciante_domicilio_actual=l),dense:"",outlined:"",clearable:"",label:"Domicilio actual"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(c,{class:"row items-center"},{default:s(()=>[n(g,{name:"description",class:"q-mr-sm"}),e[65]||(e[65]=d("div",{class:"text-subtitle1 text-weight-medium"},"6) Descripción de la denuncia",-1))]),_:1}),n(h),n(c,null,{default:s(()=>[n(i,{modelValue:o.f.caso_descripcion,"onUpdate:modelValue":e[45]||(e[45]=l=>o.f.caso_descripcion=l),type:"textarea",autogrow:"",outlined:"",dense:"",clearable:"",label:"Breve circunstancia del hecho",maxlength:"5000",counter:""},{append:s(()=>[n(g,{name:"mic",class:"cursor-pointer",color:o.isListening&&o.activeField==="caso_descripcion"?"red":"grey-7",onClick:e[44]||(e[44]=l=>u.toggleRecognition("caso_descripcion"))},null,8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(c,{class:"row items-center"},{default:s(()=>[n(g,{name:"warning",class:"q-mr-sm"}),e[66]||(e[66]=d("div",{class:"text-subtitle1 text-weight-medium"},"7) Tipología de violencia",-1))]),_:1}),n(h),n(c,null,{default:s(()=>[d("div",Be,[d("div",ze,[n(f,{modelValue:o.f.violencia_psicologica,"onUpdate:modelValue":e[46]||(e[46]=l=>o.f.violencia_psicologica=l),label:"Psicológica"},null,8,["modelValue"])]),d("div",Ge,[n(f,{modelValue:o.f.violencia_fisica,"onUpdate:modelValue":e[47]||(e[47]=l=>o.f.violencia_fisica=l),label:"Física"},null,8,["modelValue"])]),d("div",Je,[n(f,{modelValue:o.f.violencia_sexual,"onUpdate:modelValue":e[48]||(e[48]=l=>o.f.violencia_sexual=l),label:"Sexual / de género"},null,8,["modelValue"])]),d("div",Ye,[n(f,{modelValue:o.f.violencia_economica,"onUpdate:modelValue":e[49]||(e[49]=l=>o.f.violencia_economica=l),label:"Económica"},null,8,["modelValue"])]),d("div",He,[n(f,{modelValue:o.f.violencia_patrimonial,"onUpdate:modelValue":e[50]||(e[50]=l=>o.f.violencia_patrimonial=l),label:"Patrimonial"},null,8,["modelValue"])]),d("div",Ke,[n(f,{modelValue:o.f.violencia_simbolica,"onUpdate:modelValue":e[51]||(e[51]=l=>o.f.violencia_simbolica=l),label:"Simbólica / verbal / bullying"},null,8,["modelValue"])]),d("div",We,[n(f,{modelValue:o.f.violencia_institucional,"onUpdate:modelValue":e[52]||(e[52]=l=>o.f.violencia_institucional=l),label:"Institucional"},null,8,["modelValue"])]),d("div",Xe,[n(i,{modelValue:o.f.caso_tipologia,"onUpdate:modelValue":e[53]||(e[53]=l=>o.f.caso_tipologia=l),dense:"",outlined:"",clearable:"",label:"Detalle adicional (p. ej., violencia cibernética, discriminación, etc.)"},null,8,["modelValue"])])])]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[n(c,{class:"row items-center"},{default:s(()=>[n(g,{name:"inventory_2",class:"q-mr-sm"}),e[67]||(e[67]=d("div",{class:"text-subtitle1 text-weight-medium"},"8) Documentos adjuntos (check)",-1))]),_:1}),n(h),n(c,null,{default:s(()=>[d("div",Ze,[d("div",$e,[n(f,{modelValue:o.f.documento_fotocopia_carnet_denunciante,"onUpdate:modelValue":e[54]||(e[54]=l=>o.f.documento_fotocopia_carnet_denunciante=l),"true-value":"1","false-value":"0",label:"Fotocopia CI denunciante"},null,8,["modelValue"])]),d("div",el,[n(f,{modelValue:o.f.documento_fotocopia_carnet_denunciado,"onUpdate:modelValue":e[55]||(e[55]=l=>o.f.documento_fotocopia_carnet_denunciado=l),"true-value":"1","false-value":"0",label:"Fotocopia CI denunciado"},null,8,["modelValue"])]),d("div",ll,[n(f,{modelValue:o.f.documento_placas_fotograficas_domicilio_denunciante,"onUpdate:modelValue":e[56]||(e[56]=l=>o.f.documento_placas_fotograficas_domicilio_denunciante=l),"true-value":"1","false-value":"0",label:"Placas fotográficas dom. denunciante"},null,8,["modelValue"])]),d("div",ol,[n(f,{modelValue:o.f.documento_croquis_direccion_denunciado,"onUpdate:modelValue":e[57]||(e[57]=l=>o.f.documento_croquis_direccion_denunciado=l),"true-value":"1","false-value":"0",label:"Croquis dirección denunciado"},null,8,["modelValue"])])])]),_:1})]),_:1}),n(r,{flat:"",bordered:"",class:"section-card q-mb-xl"},{default:s(()=>[n(c,{class:"row items-center"},{default:s(()=>[n(g,{name:"task_alt",class:"q-mr-sm"}),e[68]||(e[68]=d("div",{class:"text-subtitle1 text-weight-medium"},"9) Seguimiento del caso",-1))]),_:1}),n(h),n(c,null,{default:s(()=>[d("div",nl,[d("div",dl,[n(p,{modelValue:o.f.psicologica_user_id,"onUpdate:modelValue":e[58]||(e[58]=l=>o.f.psicologica_user_id=l),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.psicologos.map(l=>({label:l.name,value:l.id})),label:"Área psicológica (responsable)"},null,8,["modelValue","options"])]),d("div",il,[n(p,{modelValue:o.f.trabajo_social_user_id,"onUpdate:modelValue":e[59]||(e[59]=l=>o.f.trabajo_social_user_id=l),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.sociales.map(l=>({label:l.name,value:l.id})),label:"Área social (responsable)"},null,8,["modelValue","options"])]),d("div",al,[n(p,{modelValue:o.f.legal_user_id,"onUpdate:modelValue":e[60]||(e[60]=l=>o.f.legal_user_id=l),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:o.abogados.map(l=>({label:l.name,value:l.id})),label:"Área legal (responsable)"},null,8,["modelValue","options"])])])]),_:1})]),_:1}),d("div",sl,[n(m,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:u.resetForm,class:"q-mr-sm"},null,8,["onClick"]),V.editable?U("",!0):(_(),w(m,{key:0,color:"primary",icon:"save",label:"Guardar",loading:o.loading,onClick:u.save},null,8,["loading","onClick"])),V.editable?(_(),w(m,{key:1,color:"primary",icon:"save",label:"Actualizar",loading:o.loading,onClick:u.update},null,8,["loading","onClick"])):U("",!0)])]),_:1},8,["onSubmit"])]),_:1})}const Vl=M(O,[["render",tl],["__scopeId","data-v-8d5d8d08"]]);export{Vl as C};
