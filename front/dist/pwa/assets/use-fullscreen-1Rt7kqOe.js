import{j as le,aM as w,K as ae,a6 as se,M as ie,g as N,r as E,k as b,ay as re,P as ue,aN as ce,R as de,aO as fe,s as y,v as O,z as $,E as j,a7 as ve,l as q,ao as me,m as he,J as ge,aP as pe,aQ as A,a9 as ye,V as Te}from"./index-CS7sN5Sn.js";import{v as be,f as L,u as Pe,p as R,g as Se,i as we,j as Ee,r as B,s as Oe,c as D}from"./format-C6QtnUBx.js";const ke=le({name:"QTooltip",inheritAttrs:!1,props:{...Pe,...ie,...w,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...w.transitionShow,default:"jump-down"},transitionHide:{...w.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:L},self:{type:String,default:"top middle",validator:L},offset:{type:Array,default:()=>[14,14],validator:be},scrollTarget:se,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ae],setup(e,{slots:v,emit:m,attrs:o}){let l,a;const u=N(),{proxy:{$q:t}}=u,s=E(null),r=E(!1),c=b(()=>R(e.anchor,t.lang.rtl)),f=b(()=>R(e.self,t.lang.rtl)),Q=b(()=>e.persistent!==!0),{registerTick:V,removeTick:I}=re(),{registerTimeout:T}=ue(),{transitionProps:W,transitionStyle:_}=ce(e),{localScrollTarget:x,changeScrollEvent:z,unconfigureScrollTarget:J}=Se(e,F),{anchorEl:i,canShow:K,anchorEvents:h}=we({showing:r,configureAnchorEl:te}),{show:U,hide:P}=de({showing:r,canShow:K,handleShow:X,handleHide:Y,hideOnRouteChange:Q,processOnMount:!0});Object.assign(h,{delayShow:Z,delayHide:ee});const{showPortal:C,hidePortal:k,renderPortal:G}=fe(u,s,oe,"tooltip");if(t.platform.is.mobile===!0){const n={anchorEl:i,innerRef:s,onClickOutside(d){return P(d),d.target.classList.contains("q-dialog__backdrop")&&ge(d),!0}},S=b(()=>e.modelValue===null&&e.persistent!==!0&&r.value===!0);y(S,d=>{(d===!0?Ee:B)(n)}),O(()=>{B(n)})}function X(n){C(),V(()=>{a=new MutationObserver(()=>g()),a.observe(s.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),g(),F()}),l===void 0&&(l=y(()=>t.screen.width+"|"+t.screen.height+"|"+e.self+"|"+e.anchor+"|"+t.lang.rtl,g)),T(()=>{C(!0),m("show",n)},e.transitionDuration)}function Y(n){I(),k(),H(),T(()=>{k(!0),m("hide",n)},e.transitionDuration)}function H(){a!==void 0&&(a.disconnect(),a=void 0),l!==void 0&&(l(),l=void 0),J(),$(h,"tooltipTemp")}function g(){Oe({targetEl:s.value,offset:e.offset,anchorEl:i.value,anchorOrigin:c.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Z(n){if(t.platform.is.mobile===!0){D(),document.body.classList.add("non-selectable");const S=i.value,d=["touchmove","touchcancel","touchend","click"].map(M=>[S,M,"delayHide","passiveCapture"]);j(h,"tooltipTemp",d)}T(()=>{U(n)},e.delay)}function ee(n){t.platform.is.mobile===!0&&($(h,"tooltipTemp"),D(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),T(()=>{P(n)},e.hideDelay)}function te(){if(e.noParentEvent===!0||i.value===null)return;const n=t.platform.is.mobile===!0?[[i.value,"touchstart","delayShow","passive"]]:[[i.value,"mouseenter","delayShow","passive"],[i.value,"mouseleave","delayHide","passive"]];j(h,"anchor",n)}function F(){if(i.value!==null||e.scrollTarget!==void 0){x.value=ve(i.value,e.scrollTarget);const n=e.noParentEvent===!0?g:P;z(x.value,n)}}function ne(){return r.value===!0?q("div",{...o,ref:s,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,_.value],role:"tooltip"},he(v.default)):null}function oe(){return q(me,W.value,ne)}return O(H),Object.assign(u.proxy,{updatePosition:g}),G}});let p=0;const He={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Fe=["update:fullscreen","fullscreen"];function Me(){const e=N(),{props:v,emit:m,proxy:o}=e;let l,a,u;const t=E(!1);pe(e)===!0&&y(()=>o.$route.fullPath,()=>{v.noRouteFullscreenExit!==!0&&c()}),y(()=>v.fullscreen,f=>{t.value!==f&&s()}),y(t,f=>{m("update:fullscreen",f),m("fullscreen",f)});function s(){t.value===!0?c():r()}function r(){t.value!==!0&&(t.value=!0,u=o.$el.parentNode,u.replaceChild(a,o.$el),document.body.appendChild(o.$el),p++,p===1&&document.body.classList.add("q-body--fullscreen-mixin"),l={handler:c},A.add(l))}function c(){t.value===!0&&(l!==void 0&&(A.remove(l),l=void 0),u.replaceChild(o.$el,a),t.value=!1,p=Math.max(0,p-1),p===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return ye(()=>{a=document.createElement("span")}),Te(()=>{v.fullscreen===!0&&r()}),O(c),Object.assign(o,{toggleFullscreen:s,setFullscreen:r,exitFullscreen:c}),{inFullscreen:t,toggleFullscreen:s}}export{ke as Q,He as a,Me as b,Fe as u};
