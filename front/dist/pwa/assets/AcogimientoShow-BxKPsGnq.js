import{_ as v,c as g,o as p,w as n,a,Q as d,b as s,a5 as b,f as I,a3 as N,a6 as t,d as A,bA as E,a0 as V,a1 as h,a2 as _}from"./index-dOWFJ4BU.js";import{Q as C}from"./QSpace-Dp7tYn3p.js";import{Q as c}from"./QSelect-Ctp9WErU.js";import{Q as L}from"./QPage-bdGzpsIs.js";import"./QMenu-DOtLoJm0.js";import"./format-3ZxT3a7P.js";import"./QItemLabel-u2i_DfNU.js";const O={name:"AcogimientoShow",data(){return{casoId:null,saving:!1,header:{nurej:"",caso_numero:"",nna:""},form:{adopcion:null,hogar:null,nino1:null,nino2:null,nino3:null,nino4:null,nino5:null,nino6:null,nino7:null,nino8:null,nino9:null,nino10:null,juzgado:null,cuidado_nombre:null,cuidado_paterno:null,cuidado_materno:null,area_legal:null,tipologia:null,audiencia_evaluacion:null,fecha:null,proximas_audiencia:null},adopcionOpts:[{label:"(AI) ACOGIDA INSTITUCIONAL",value:"AI"},{label:"(AFA) ACOGIMIENTO CON FAMILIA AMPLIADA",value:"AFA"},{label:"(AFC) ACOGIMIENTO CON FAMILIA COMUNITARIA",value:"AFC"},{label:"(RFO) RESTITUCIÓN DE FAMILIA AL ORIGEN",value:"RFO"}],hogarOpts:[{label:"GOTA DE LECHE",value:"GOTA DE LECHE"},{label:"ANDRIOLI",value:"ANDRIOLI"},{label:"ZELADA",value:"ZELADA"},{label:"PENI",value:"PENI"},{label:"ALDEAS SOS",value:"ALDEAS SOS"},{label:"CRECER",value:"CRECER"}],areaLegalOpts:[{label:"DENUNCIA",value:"DENUNCIA"},{label:"DEMANDA",value:"DEMANDA"}],tipologiasPorArea:{DEMANDA:[{label:"ASISTENCIAS FAMILIARES (AF)",value:"ASISTENCIAS FAMILIARES (AF)"},{label:"EXTENSIONES GUARDAS",value:"EXTENSIONES GUARDAS"},{label:"INFRACCIÓN A LA LEY",value:"INFRACCIÓN A LA LEY"}],DENUNCIA:[{label:"Sustracción de un Menor o Incapaz",value:"Sustracción de un Menor o Incapaz"},{label:"Infanticidio",value:"Infanticidio"},{label:"Lesiones Graves y Leves",value:"Lesiones Graves y Leves"},{label:"Violencia Familiar o Doméstica",value:"Violencia Familiar o Doméstica"},{label:"Violación",value:"Violación"},{label:"Violación NNA",value:"Violación NNA"},{label:"Estupro",value:"Estupro"},{label:"Abuso sexual",value:"Abuso sexual"},{label:"Acoso sexual",value:"Acoso sexual"},{label:"Corrupción de NNA",value:"Corrupción de NNA"},{label:"Pornografía",value:"Pornografía"},{label:"Otros",value:"Otros"}]}}},computed:{tipologiaComputed(){const i=this.form.area_legal||"DENUNCIA";return this.tipologiasPorArea[i]||[]}},mounted(){this.casoId=this.$route.params.id,this.load()},methods:{async load(){try{const{data:i}=await this.$axios.get(`/casos/${this.casoId}/acogimiento`),l=i?.caso||{},u=i?.acogimiento||null;this.header.nurej=l.nurej||"—",this.header.caso_numero=l.caso_numero||"—";const r=Array.isArray(l.menores)&&l.menores.length?l.menores[0]:null;this.header.nna=r?[r.menor_nombres,r.menor_paterno,r.menor_materno].filter(Boolean).join(" "):"—",u&&Object.assign(this.form,u)}catch(i){this.$alert.error(i.response?.data?.message||"No se pudo cargar el acogimiento")}},onAreaLegalChange(){this.tipologiaComputed.map(l=>l.value).includes(this.form.tipologia)||(this.form.tipologia=null)},async save(){this.saving=!0;try{const i={...this.form};await this.$axios.put(`/casos/${this.casoId}/acogimiento`,i),this.$alert.success("Guardado correctamente"),await this.load()}catch(i){this.$alert.error(i.response?.data?.message||"No se pudo guardar")}finally{this.saving=!1}}}},D={class:"row items-center q-gutter-sm q-mb-sm"},S={class:"row q-col-gutter-md q-mb-md"},U={class:"col-12 col-md-4"},x={class:"col-12 col-md-4"},F={class:"row q-col-gutter-md"},q={class:"col-12 col-md-4"},M={class:"col-12 col-md-4"},R={class:"col-12 col-md-4"},y={class:"col-12 col-md-4"},T={class:"col-12 col-md-4"},w={class:"row q-col-gutter-md"},Q={class:"col-12 col-md-4"},G={class:"col-12 col-md-8"},j={class:"row q-col-gutter-md"};function Y(i,l,u,r,e,m){return p(),g(L,{class:"q-pa-md"},{default:n(()=>[a(d,{flat:"",bordered:"",class:"q-pa-md"},{default:n(()=>[s("div",D,[a(b,{icon:"home",color:"primary","text-color":"white"}),l[10]||(l[10]=s("div",{class:"text-h6 text-weight-bold"},"Acogimiento",-1)),a(C),a(I,{color:"primary",icon:"save",label:"Guardar",loading:e.saving,onClick:m.save},null,8,["loading","onClick"])]),a(N,{spaced:""}),s("div",S,[s("div",U,[a(t,{modelValue:e.header.nurej,"onUpdate:modelValue":l[0]||(l[0]=o=>e.header.nurej=o),label:"NUREJ",readonly:"",filled:""},{prepend:n(()=>[a(A,{name:"tag"})]),_:1},8,["modelValue"])]),s("div",x,[a(t,{modelValue:e.header.caso_numero,"onUpdate:modelValue":l[1]||(l[1]=o=>e.header.caso_numero=o),label:"Nº Caso",readonly:"",filled:""},{prepend:n(()=>[a(A,{name:"numbers"})]),_:1},8,["modelValue"])]),l[11]||(l[11]=s("div",{class:"col-12 col-md-4"},null,-1))]),a(d,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:n(()=>[l[12]||(l[12]=s("div",{class:"text-subtitle1 q-mb-sm"},"Tipo de acogimiento",-1)),a(E,{modelValue:e.form.adopcion,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.adopcion=o),type:"radio",options:e.adopcionOpts,inline:"",dense:""},null,8,["modelValue","options"])]),_:1}),a(d,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:n(()=>[s("div",F,[s("div",q,[a(c,{modelValue:e.form.hogar,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.hogar=o),options:e.hogarOpts,label:"Hogar",filled:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),s("div",M,[a(t,{modelValue:e.form.juzgado,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.juzgado=o),label:"Juzgado",filled:""},null,8,["modelValue"])]),s("div",R,[a(t,{modelValue:e.form.audiencia_evaluacion,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.audiencia_evaluacion=o),label:"Audiencia de Evaluación",filled:"",type:"date"},null,8,["modelValue"])]),s("div",y,[a(t,{modelValue:e.form.fecha,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.fecha=o),label:"Fecha (YYYY-MM-DD)",filled:""},null,8,["modelValue"])]),s("div",T,[a(t,{modelValue:e.form.proximas_audiencia,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.proximas_audiencia=o),label:"Próxima Audiencia (YYYY-MM-DD)",filled:""},null,8,["modelValue"])])])]),_:1}),a(d,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:n(()=>[s("div",w,[s("div",Q,[a(c,{modelValue:e.form.area_legal,"onUpdate:modelValue":[l[8]||(l[8]=o=>e.form.area_legal=o),m.onAreaLegalChange],options:e.areaLegalOpts,label:"Área Legal",filled:"","emit-value":"","map-options":""},null,8,["modelValue","options","onUpdate:modelValue"])]),s("div",G,[a(c,{modelValue:e.form.tipologia,"onUpdate:modelValue":l[9]||(l[9]=o=>e.form.tipologia=o),options:m.tipologiaComputed,label:"Tipología",filled:"","emit-value":"","map-options":"","use-input":"","fill-input":"","input-debounce":"0"},null,8,["modelValue","options"])])])]),_:1}),a(d,{flat:"",bordered:"",class:"q-pa-md"},{default:n(()=>[l[13]||(l[13]=s("div",{class:"text-subtitle1 q-mb-sm"},"Niños/Niñas asociados",-1)),s("div",j,[(p(),V(h,null,_(10,o=>s("div",{key:o,class:"col-12 col-md-6"},[a(t,{modelValue:e.form[`nino${o}`],"onUpdate:modelValue":f=>e.form[`nino${o}`]=f,label:`Niño ${o}`,filled:""},null,8,["modelValue","onUpdate:modelValue","label"])])),64))])]),_:1})]),_:1})]),_:1})}const Z=v(O,[["render",Y],["__scopeId","data-v-611f73b9"]]);export{Z as default};
