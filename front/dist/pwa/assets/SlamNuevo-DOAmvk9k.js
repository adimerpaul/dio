import{_ as Q,Y as L,c as w,o as m,w as s,b as l,a0 as g,a as o,f as b,$ as x,ac as F,Q as h,e as _,d as p,a3 as v,a1 as S,a2 as D,a6 as u,a7 as U,a9 as A,Z as r,t as c}from"./index-Cm2id_4a.js";import{Q as M}from"./QSpace-CfzYtfPh.js";import{Q as k}from"./QSelect-BPTi5e2J.js";import{Q as P}from"./QForm-BatrvI9X.js";import{Q as V,b as C,c as y}from"./QMenu-wi01vNJO.js";import{Q as j}from"./QPage-DFSlqVHk.js";import{M as z}from"./MapPicker-DOheHnDy.js";const O={name:"CasoNuevoSLAM",components:{MapPicker:z},props:{casoId:{type:[Number,String],default:null},editable:{type:Boolean,default:!1},showNumeroApoyoIntegral:{type:Boolean,default:!1}},data(){return{loading:!1,oruroCenter:[-17.9667,-67.1167],sexos:[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"Otro",value:"Otro"}],documentos:[{label:"Carnet de identidad",value:"Carnet de identidad"},{label:"RUN/Complemento",value:"RUN"},{label:"Pasaporte",value:"Pasaporte"},{label:"Otro",value:"Otro"}],abogados:[],psicologos:[],sociales:[],tipos:{violencia_fisica:!1,violencia_psicologica:!1,abandono:!1,apoyo_integral:!1},f:{tipo:"SLAM",principal:"",numero_apoyo_integral:"",caso_numero:"",caso_fecha_hecho:"",caso_lugar_hecho:"",caso_zona:"",caso_direccion:"",caso_descripcion:"",caso_tipologia:"",caso_modalidad:"",violencia_fisica:!1,violencia_psicologica:!1,violencia_sexual:!1,violencia_economica:!1,denunciantes:[],denunciados:[{denunciado_nombres:"",denunciado_paterno:"",denunciado_materno:"",denunciado_documento:"Carnet de identidad",denunciado_nro:"",denunciado_sexo:"",denunciado_lugar_nacimiento:"",denunciado_fecha_nacimiento:"",denunciado_edad:"",denunciado_telefono:"",denunciado_residencia:"",denunciado_estado_civil:"",denunciado_relacion:"",denunciado_grado:"",denunciado_trabaja:1,denunciado_prox:"",denunciado_ocupacion:"",denunciado_ocupacion_exacto:"",denunciado_idioma:"",denunciado_fijo:"",denunciado_movil:"",denunciado_domicilio_actual:"",denunciado_latitud:null,denunciado_longitud:null}],familiares:[],psicologica_user_id:"",trabajo_social_user_id:"",legal_user_id:"",documento_fotocopia_carnet_denunciante:"0",documento_fotocopia_carnet_denunciado:"0",documento_placas_fotograficas_domicilio_denunciante:"0",documento_placas_fotograficas_domicilio_denunciado:"0"}}},computed:{denunciantePos:{get(){const n=this.f.denunciantes[0]||{};return{latitud:n.latitud||null,longitud:n.longitud||null}},set(n){this.f.denunciantes.length||this.addAdulto(),this.f.denunciantes[0].latitud=n?.latitud??null,this.f.denunciantes[0].longitud=n?.longitud??null}}},mounted(){this.$axios.get("/usuariosRole").then(n=>{this.psicologos=n.data.psicologos||[],this.abogados=n.data.abogados||[],this.sociales=n.data.sociales||[]}).catch(()=>this.$alert?.error?.("No se pudo cargar los usuarios por rol")),this.editable&&this.casoId&&this.getCaso()},methods:{show(n){return n==null||n===""?"—":String(n)},yesNo(n){return n===!0||n===1||n==="1"?"Sí":"No"},fmtDate(n){if(!n)return"";const e=new Date(n);if(isNaN(e.getTime()))return this.show(n);const f=e.getFullYear(),N=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${f}-${N}-${a}`},req(n){return!!n||"Requerido"},calcEdad(n){if(!n)return"";const e=Date.now()-new Date(n).getTime();return Math.floor(e/(1e3*60*60*24*365.25))},addAdulto(){this.f.denunciantes.push({denunciante_nombres:"",denunciante_paterno:"",denunciante_materno:"",denunciante_documento:"Carnet de identidad",denunciante_nro:"",denunciante_sexo:"",denunciante_lugar_nacimiento:"",denunciante_fecha_nacimiento:"",denunciante_edad:"",denunciante_telefono:"",denunciante_residencia:"",denunciante_estado_civil:"",denunciante_relacion:"",denunciante_grado:"",denunciante_trabaja:!1,denunciante_ocupacion:"",latitud:null,longitud:null,__idioma_castellano:!1,__idioma_quechua:!1,__idioma_aymara:!1,__idioma_otros:""})},addFamiliar(){this.f.familiares.push({familiar_nombre_completo:"",familiar_parentesco:"",familiar_edad:null,familiar_sexo:"",familiar_ocupacion:""})},resetForm(){this.f={...this.f,principal:"",numero_apoyo_integral:"",caso_numero:"",caso_fecha_hecho:"",caso_lugar_hecho:"",caso_zona:"",caso_direccion:"",caso_descripcion:"",caso_tipologia:"",caso_modalidad:"",violencia_fisica:!1,violencia_psicologica:!1,violencia_sexual:!1,violencia_economica:!1,denunciantes:[],denunciados:this.f.denunciados,familiares:[],psicologica_user_id:"",trabajo_social_user_id:"",legal_user_id:"",documento_fotocopia_carnet_denunciante:"0",documento_fotocopia_carnet_denunciado:"0",documento_placas_fotograficas_domicilio_denunciante:"0",documento_placas_fotograficas_domicilio_denunciado:"0"},this.tipos={violencia_fisica:!1,violencia_psicologica:!1,abandono:!1,apoyo_integral:!1},this.$q.notify({type:"info",message:"Formulario reiniciado"})},async save(){if(!this.f.denunciantes.length||!this.f.denunciantes[0].denunciante_nombres){this.$alert?.error?.("Debe registrar al menos un Adulto (denunciante) con nombres.");return}this.f.denunciantes=this.f.denunciantes.map(e=>{const f=[];return e.__idioma_castellano&&f.push("Castellano"),e.__idioma_quechua&&f.push("Quechua"),e.__idioma_aymara&&f.push("Aymara"),(e.__idioma_otros||"").trim()&&f.push(e.__idioma_otros.trim()),{...e,denunciante_idioma:f.join(", ")}});const n=[];this.tipos.violencia_fisica&&(n.push("Violencia física"),this.f.violencia_fisica=!0),this.tipos.violencia_psicologica&&(n.push("Violencia psicológica"),this.f.violencia_psicologica=!0),this.tipos.abandono&&n.push("Abandono"),this.tipos.apoyo_integral&&(n.push("Apoyo integral"),this.f.principal="APOYO INTEGRAL"),this.f.caso_tipologia=n.join(" · "),this.loading=!0;try{const e=await this.$axios.post("/casos",{...this.f,tipo:"SLAM"}),f=e?.data?.id||e?.data?.caso?.id;this.$alert?.success?.("Caso SLAM creado"),f?this.$router.push(`/casos/${f}`):this.$router.push("/casos?tipo=SLAM")}catch(e){this.$alert?.error?.(e?.response?.data?.message||"No se pudo crear el Caso SLAM")}finally{this.loading=!1}},async update(){if(!this.casoId)return;if(!this.f.denunciantes.length||!this.f.denunciantes[0].denunciante_nombres){this.$alert?.error?.("Debe registrar al menos un Adulto (denunciante) con nombres.");return}this.f.denunciantes=this.f.denunciantes.map(e=>{const f=[];return e.__idioma_castellano&&f.push("Castellano"),e.__idioma_quechua&&f.push("Quechua"),e.__idioma_aymara&&f.push("Aymara"),(e.__idioma_otros||"").trim()&&f.push(e.__idioma_otros.trim()),{...e,denunciante_idioma:f.join(", ")}});const n=[];this.f.violencia_fisica=this.f.violencia_psicologica=!1,this.tipos.violencia_fisica&&(n.push("Violencia física"),this.f.violencia_fisica=!0),this.tipos.violencia_psicologica&&(n.push("Violencia psicológica"),this.f.violencia_psicologica=!0),this.tipos.abandono&&n.push("Abandono"),this.tipos.apoyo_integral&&(n.push("Apoyo integral"),this.f.principal="APOYO INTEGRAL"),this.f.caso_tipologia=n.join(" · "),this.loading=!0;try{await this.$axios.put(`/casos/${this.casoId}`,this.f),this.$alert?.success?.("Caso SLAM actualizado"),this.$router.push(`/casos/${this.casoId}`)}catch(e){this.$alert?.error?.(e?.response?.data?.message||"No se pudo actualizar el Caso SLAM")}finally{this.loading=!1}},async getCaso(){if(this.casoId){this.loading=!0;try{const{data:n}=await this.$axios.get(`/casos/${this.casoId}`);this.f={...this.f,...n,denunciantes:n.denunciantes&&n.denunciantes.length?n.denunciantes.map(e=>({...e,__idioma_castellano:(e.denunciante_idioma||"").includes("Castellano"),__idioma_quechua:(e.denunciante_idioma||"").includes("Quechua"),__idioma_aymara:(e.denunciante_idioma||"").includes("Aymara"),__idioma_otros:""})):[]},this.tipos.violencia_fisica=!!n.violencia_fisica,this.tipos.violencia_psicologica=!!n.violencia_psicologica,this.tipos.abandono=(n.caso_tipologia||"").toLowerCase().includes("abandono"),this.tipos.apoyo_integral=(n.principal||"").toLowerCase().includes("apoyo integral"),(!this.f.denunciados||!this.f.denunciados.length)&&(this.f.denunciados=[this.f.denunciados?.[0]||this.f.denunciadosBase])}catch{this.$alert?.error?.("No se pudo cargar el caso")}finally{this.loading=!1}}}}},R={class:"toolbar q-pa-sm bg-white row items-center q-gutter-sm shadow-1"},T={key:0,class:"col-auto row q-gutter-sm"},E={key:1,class:"col-auto row q-gutter-sm"},B={key:0,class:"text-grey-7 q-mb-md"},G={class:"row q-col-gutter-md items-center"},Y={class:"col-12 col-md-4"},Z={class:"col-6 col-md-2"},H={class:"col-6 col-md-2"},J={class:"col-6 col-md-3"},K={class:"col-6 col-md-3"},W={class:"col-6 col-md-3"},X={class:"col-6 col-md-3"},$={class:"col-6 col-md-2"},ee={class:"col-12 col-md-4"},oe={class:"col-6 col-md-3"},le={class:"col-6 col-md-3"},ae={class:"col-12 col-md-3"},ie={class:"col-6 col-md-2"},se={class:"col-6 col-md-2"},ne={class:"col-6 col-md-2"},te={class:"col-12 col-md-6"},de={class:"col-auto q-mt-sm"},ce={class:"row q-col-gutter-md"},ue={class:"col-12 col-md-3"},re={class:"col-6 col-md-2"},_e={class:"col-12 col-md-7"},me={class:"col-12 col-md-2"},fe={class:"col-12"},pe={class:"col-12"},ge={class:"col-6 col-md-3"},ve={class:"col-6 col-md-3"},be={class:"col-6 col-md-3"},he={class:"col-6 col-md-3"},Ve={key:0,class:"text-grey-7 q-mb-md"},ye={class:"row q-col-gutter-md items-center"},xe={class:"col-12 col-md-4"},we={class:"col-6 col-md-2"},Ue={class:"col-3 col-md-2"},Ce={class:"col-3 col-md-2"},qe={class:"col-12 col-md-3"},ke={class:"col-auto q-mt-sm"},Ae={class:"row q-col-gutter-md"},Se={class:"col-12 col-md-3"},Ne={class:"col-6 col-md-2"},De={class:"col-6 col-md-2"},Me={class:"col-6 col-md-2"},Ie={class:"col-12 col-md-5"},Qe={class:"col-6 col-md-3"},Le={class:"col-6 col-md-3"},Fe={class:"col-6 col-md-3"},Pe={class:"col-6 col-md-3"},je={class:"row q-col-gutter-md"},ze={class:"col-12 col-md-4"},Oe={class:"col-12 col-md-4"},Re={class:"col-12 col-md-4"},Te={class:"row q-col-gutter-md"},Ee={class:"col-12 col-md-3"},Be={class:"col-12 col-md-3"},Ge={class:"col-12 col-md-3"},Ye={class:"col-12 col-md-3"},Ze={class:"text-right q-mb-xl"},He={class:"col-12 col-md-8"},Je={class:"text-h6 text-weight-bold"},Ke={key:0},We={key:1},Xe={class:"text-caption text-grey-7"},$e={class:"col-12 col-md-4 flex items-center justify-end"},eo={class:"row q-col-gutter-md"},oo={class:"col-6 col-md-3"},lo={class:"text-body1"},ao={class:"col-6 col-md-3"},io={class:"text-body1"},so={class:"col-6 col-md-3"},no={class:"text-body1"},to={class:"col-12 col-md-3"},co={class:"text-body1"},uo={class:"col-12 col-md-4"},ro={class:"text-body1"},_o={class:"col-12 col-md-4"},mo={class:"text-body1"},fo={class:"col-12 col-md-4"},po={class:"text-body1"},go={key:0},vo={class:"col-12"},bo={class:"q-pa-sm bg-grey-1",style:{"white-space":"pre-wrap","border-radius":"10px"}},ho={class:"row q-col-gutter-sm"},Vo={class:"col-auto"},yo={class:"col-auto"},xo={class:"col-auto"},wo={class:"col-auto"},Uo={class:"row q-col-gutter-md"},Co={class:"col-12 col-md-4"},qo={class:"text-body1"},ko={class:"col-12 col-md-4"},Ao={class:"text-body1"},So={class:"col-12 col-md-4"},No={class:"text-body1"},Do={class:"row q-col-gutter-md"},Mo={class:"col-12 col-md-3"},Io={class:"text-body1"},Qo={class:"col-12 col-md-3"},Lo={class:"text-body1"},Fo={class:"col-12 col-md-3"},Po={class:"text-body1"},jo={class:"col-12 col-md-3"},zo={class:"text-body1"},Oo={class:"col-12 col-md-3"},Ro={class:"text-body1"},To={class:"col-12 col-md-3"},Eo={class:"text-body1"},Bo={class:"row q-col-gutter-sm"},Go={class:"col-12 col-sm-6 col-md-4"},Yo={class:"col-12 col-sm-6 col-md-4"},Zo={class:"col-12 col-sm-6 col-md-4"},Ho={class:"col-12 col-sm-6 col-md-4"},Jo={key:0,class:"col-12 col-sm-6 col-md-4"},Ko={key:1,class:"col-12 col-sm-6 col-md-4"};function Wo(n,e,f,N,a,d){const I=L("MapPicker");return m(),w(j,{class:"q-pa-md bg-grey-2"},{default:s(()=>[l("div",R,[e[26]||(e[26]=l("div",{class:"col"},[l("div",{class:"text-h6 text-weight-bold"}," Registro S.L.A.M. (Adulto Mayor) — Caso "),l("div",{class:"text-caption text-grey-7"}," Múltiples Adultos (denunciantes) y Familiares · Se guarda en /casos (tipo=SLAM) ")],-1)),f.editable?(m(),g("div",E,[o(b,{flat:"",color:"primary",icon:"refresh",label:"Recargar",onClick:d.getCaso},null,8,["onClick"]),n.$store.user?.role==="Administrador"||n.$store.user?.role==="Asistente"?(m(),w(b,{key:0,color:"primary",icon:"save",label:"Actualizar",loading:a.loading,onClick:d.update},null,8,["loading","onClick"])):x("",!0)])):(m(),g("div",T,[o(b,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:d.resetForm},null,8,["onClick"]),o(b,{color:"primary",icon:"save",label:"Guardar",loading:a.loading,onClick:d.save},null,8,["loading","onClick"])]))]),n.$store.user?.role==="Administrador"||n.$store.user?.role==="Asistente"?(m(),w(P,{key:0,class:"q-mt-lg",onSubmit:F(d.save,["prevent"])},{default:s(()=>[o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"elderly",class:"q-mr-sm"}),e[27]||(e[27]=l("div",{class:"text-subtitle1 text-weight-medium"},"1) Adultos (denunciantes)",-1)),o(M),o(b,{dense:"",color:"primary",flat:"",icon:"add",label:"Agregar adulto",onClick:d.addAdulto},null,8,["onClick"])]),_:1}),o(v),o(_,null,{default:s(()=>[a.f.denunciantes.length?x("",!0):(m(),g("div",B," No hay adultos agregados. Usa “Agregar adulto”. ")),(m(!0),g(S,null,D(a.f.denunciantes,(i,q)=>(m(),g("div",{key:"ad"+q,class:"q-mb-md"},[l("div",G,[l("div",Y,[o(u,{modelValue:i.denunciante_nombres,"onUpdate:modelValue":t=>i.denunciante_nombres=t,dense:"",outlined:"",clearable:"",rules:[d.req],label:"Nombres *"},null,8,["modelValue","onUpdate:modelValue","rules"])]),l("div",Z,[o(u,{modelValue:i.denunciante_paterno,"onUpdate:modelValue":t=>i.denunciante_paterno=t,dense:"",outlined:"",clearable:"",label:"Paterno"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",H,[o(u,{modelValue:i.denunciante_materno,"onUpdate:modelValue":t=>i.denunciante_materno=t,dense:"",outlined:"",clearable:"",label:"Materno"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",J,[o(k,{modelValue:i.denunciante_documento,"onUpdate:modelValue":t=>i.denunciante_documento=t,dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:a.documentos,label:"Documento"},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",K,[o(u,{modelValue:i.denunciante_nro,"onUpdate:modelValue":t=>i.denunciante_nro=t,dense:"",outlined:"",clearable:"",label:"Doc. Nº"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",W,[o(u,{modelValue:i.denunciante_fecha_nacimiento,"onUpdate:modelValue":[t=>i.denunciante_fecha_nacimiento=t,t=>i.denunciante_edad=d.calcEdad(i.denunciante_fecha_nacimiento)],type:"date",dense:"",outlined:"",label:"Fecha nac."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",X,[o(u,{modelValue:i.denunciante_lugar_nacimiento,"onUpdate:modelValue":t=>i.denunciante_lugar_nacimiento=t,dense:"",outlined:"",clearable:"",label:"Lugar nac."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",$,[o(u,{modelValue:i.denunciante_edad,"onUpdate:modelValue":t=>i.denunciante_edad=t,dense:"",outlined:"",clearable:"",label:"Edad"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ee,[o(u,{modelValue:i.denunciante_residencia,"onUpdate:modelValue":t=>i.denunciante_residencia=t,dense:"",outlined:"",clearable:"",label:"Domicilio"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",oe,[o(u,{modelValue:i.denunciante_estado_civil,"onUpdate:modelValue":t=>i.denunciante_estado_civil=t,dense:"",outlined:"",clearable:"",label:"Estado civil"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",le,[o(u,{modelValue:i.denunciante_ocupacion,"onUpdate:modelValue":t=>i.denunciante_ocupacion=t,dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ae,[o(u,{modelValue:i.denunciante_telefono,"onUpdate:modelValue":t=>i.denunciante_telefono=t,dense:"",outlined:"",clearable:"",label:"Teléfono"},null,8,["modelValue","onUpdate:modelValue"])]),e[28]||(e[28]=l("div",{class:"col-12 text-caption text-grey-7 q-pt-xs"},"Idiomas",-1)),l("div",ie,[o(U,{modelValue:i.__idioma_castellano,"onUpdate:modelValue":t=>i.__idioma_castellano=t,label:"Castellano"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",se,[o(U,{modelValue:i.__idioma_quechua,"onUpdate:modelValue":t=>i.__idioma_quechua=t,label:"Quechua"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ne,[o(U,{modelValue:i.__idioma_aymara,"onUpdate:modelValue":t=>i.__idioma_aymara=t,label:"Aymara"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",te,[o(u,{modelValue:i.__idioma_otros,"onUpdate:modelValue":t=>i.__idioma_otros=t,dense:"",outlined:"",clearable:"",label:"Otros idiomas"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",de,[o(b,{dense:"",round:"",flat:"",color:"negative",icon:"delete",onClick:t=>a.f.denunciantes.splice(q,1)},null,8,["onClick"])])]),o(v,{spaced:""})]))),128))]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"description",class:"q-mr-sm"}),e[29]||(e[29]=l("div",{class:"text-subtitle1 text-weight-medium"},"2) Datos del caso (S.L.A.M.)",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",ce,[l("div",ue,[o(u,{modelValue:a.f.numero_apoyo_integral,"onUpdate:modelValue":e[0]||(e[0]=i=>a.f.numero_apoyo_integral=i),dense:"",outlined:"",clearable:"",label:"Nº Apoyo Integral"},null,8,["modelValue"])]),l("div",re,[o(u,{modelValue:a.f.caso_fecha_hecho,"onUpdate:modelValue":e[1]||(e[1]=i=>a.f.caso_fecha_hecho=i),type:"date",dense:"",outlined:"",label:"Fecha de registro"},null,8,["modelValue"])]),l("div",_e,[o(u,{modelValue:a.f.caso_direccion,"onUpdate:modelValue":e[2]||(e[2]=i=>a.f.caso_direccion=i),dense:"",outlined:"",clearable:"",label:"Dirección para hoja de ruta (opcional)"},null,8,["modelValue"])]),l("div",me,[o(b,{outline:"",label:"Buscar",onClick:e[3]||(e[3]=i=>n.$refs.mapRef?.geocodeAndFly(a.f.caso_direccion))})]),l("div",fe,[e[30]||(e[30]=l("div",{class:"text-caption text-grey-7 q-mb-xs"},"Ubicación (usa la dirección del 1er adulto)",-1)),o(I,{modelValue:d.denunciantePos,"onUpdate:modelValue":e[4]||(e[4]=i=>d.denunciantePos=i),center:a.oruroCenter,address:a.f.caso_direccion||a.f.denunciantes[0]?.denunciante_residencia||"",country:"bo",ref:"mapRef"},null,8,["modelValue","center","address"])]),l("div",pe,[o(u,{modelValue:a.f.caso_descripcion,"onUpdate:modelValue":e[5]||(e[5]=i=>a.f.caso_descripcion=i),type:"textarea",autogrow:"",outlined:"",dense:"",clearable:"",label:"Breve circunstancia del hecho / denuncia",maxlength:"3000"},null,8,["modelValue"])]),l("div",ge,[o(U,{modelValue:a.tipos.violencia_fisica,"onUpdate:modelValue":e[6]||(e[6]=i=>a.tipos.violencia_fisica=i),label:"Violencia física"},null,8,["modelValue"])]),l("div",ve,[o(U,{modelValue:a.tipos.violencia_psicologica,"onUpdate:modelValue":e[7]||(e[7]=i=>a.tipos.violencia_psicologica=i),label:"Violencia psicológica"},null,8,["modelValue"])]),l("div",be,[o(U,{modelValue:a.tipos.abandono,"onUpdate:modelValue":e[8]||(e[8]=i=>a.tipos.abandono=i),label:"Abandono"},null,8,["modelValue"])]),l("div",he,[o(U,{modelValue:a.tipos.apoyo_integral,"onUpdate:modelValue":e[9]||(e[9]=i=>a.tipos.apoyo_integral=i),label:"Apoyo integral (principal)"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"diversity_3",class:"q-mr-sm"}),e[31]||(e[31]=l("div",{class:"text-subtitle1 text-weight-medium"},"3) Familiares (N)",-1)),o(M),o(b,{dense:"",color:"primary",flat:"",icon:"add",label:"Agregar familiar",onClick:d.addFamiliar},null,8,["onClick"])]),_:1}),o(v),o(_,null,{default:s(()=>[a.f.familiares.length?x("",!0):(m(),g("div",Ve," No hay familiares agregados. Usa “Agregar familiar”. ")),(m(!0),g(S,null,D(a.f.familiares,(i,q)=>(m(),g("div",{key:"fam"+q,class:"q-mb-md"},[l("div",ye,[l("div",xe,[o(u,{modelValue:i.familiar_nombre_completo,"onUpdate:modelValue":t=>i.familiar_nombre_completo=t,dense:"",outlined:"",clearable:"",label:"Nombres y apellidos"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",we,[o(u,{modelValue:i.familiar_parentesco,"onUpdate:modelValue":t=>i.familiar_parentesco=t,dense:"",outlined:"",clearable:"",label:"Parentesco"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Ue,[o(u,{modelValue:i.familiar_edad,"onUpdate:modelValue":t=>i.familiar_edad=t,modelModifiers:{number:!0},type:"number",dense:"",outlined:"",label:"Edad"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Ce,[o(k,{modelValue:i.familiar_sexo,"onUpdate:modelValue":t=>i.familiar_sexo=t,dense:"",outlined:"",clearable:"",options:a.sexos,"emit-value":"","map-options":"",label:"Sexo"},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",qe,[o(u,{modelValue:i.familiar_ocupacion,"onUpdate:modelValue":t=>i.familiar_ocupacion=t,dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ke,[o(b,{dense:"",round:"",flat:"",color:"negative",icon:"delete",onClick:t=>a.f.familiares.splice(q,1)},null,8,["onClick"])])]),o(v,{spaced:""})]))),128))]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"person_off",class:"q-mr-sm"}),e[32]||(e[32]=l("div",{class:"text-subtitle1 text-weight-medium"},"4) Datos del denunciado/a",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",Ae,[l("div",Se,[o(u,{modelValue:a.f.denunciados[0].denunciado_nombres,"onUpdate:modelValue":e[10]||(e[10]=i=>a.f.denunciados[0].denunciado_nombres=i),dense:"",outlined:"",clearable:"",label:"Nombres"},null,8,["modelValue"])]),l("div",Ne,[o(u,{modelValue:a.f.denunciados[0].denunciado_paterno,"onUpdate:modelValue":e[11]||(e[11]=i=>a.f.denunciados[0].denunciado_paterno=i),dense:"",outlined:"",clearable:"",label:"Paterno"},null,8,["modelValue"])]),l("div",De,[o(u,{modelValue:a.f.denunciados[0].denunciado_materno,"onUpdate:modelValue":e[12]||(e[12]=i=>a.f.denunciados[0].denunciado_materno=i),dense:"",outlined:"",clearable:"",label:"Materno"},null,8,["modelValue"])]),l("div",Me,[o(u,{modelValue:a.f.denunciados[0].denunciado_edad,"onUpdate:modelValue":e[13]||(e[13]=i=>a.f.denunciados[0].denunciado_edad=i),dense:"",outlined:"",clearable:"",label:"Edad"},null,8,["modelValue"])]),l("div",Ie,[o(u,{modelValue:a.f.denunciados[0].denunciado_domicilio_actual,"onUpdate:modelValue":e[14]||(e[14]=i=>a.f.denunciados[0].denunciado_domicilio_actual=i),dense:"",outlined:"",clearable:"",label:"Domicilio"},null,8,["modelValue"])]),l("div",Qe,[o(u,{modelValue:a.f.denunciados[0].denunciado_estado_civil,"onUpdate:modelValue":e[15]||(e[15]=i=>a.f.denunciados[0].denunciado_estado_civil=i),dense:"",outlined:"",clearable:"",label:"Estado civil"},null,8,["modelValue"])]),l("div",Le,[o(u,{modelValue:a.f.denunciados[0].denunciado_idioma,"onUpdate:modelValue":e[16]||(e[16]=i=>a.f.denunciados[0].denunciado_idioma=i),dense:"",outlined:"",clearable:"",label:"Idioma"},null,8,["modelValue"])]),l("div",Fe,[o(u,{modelValue:a.f.denunciados[0].denunciado_grado,"onUpdate:modelValue":e[17]||(e[17]=i=>a.f.denunciados[0].denunciado_grado=i),dense:"",outlined:"",clearable:"",label:"Grado de instrucción"},null,8,["modelValue"])]),l("div",Pe,[o(u,{modelValue:a.f.denunciados[0].denunciado_ocupacion,"onUpdate:modelValue":e[18]||(e[18]=i=>a.f.denunciados[0].denunciado_ocupacion=i),dense:"",outlined:"",clearable:"",label:"Ocupación"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"task_alt",class:"q-mr-sm"}),e[33]||(e[33]=l("div",{class:"text-subtitle1 text-weight-medium"},"5) Seguimiento (responsables)",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",je,[l("div",ze,[o(k,{modelValue:a.f.psicologica_user_id,"onUpdate:modelValue":e[19]||(e[19]=i=>a.f.psicologica_user_id=i),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:a.psicologos.map(i=>({label:i.name,value:i.id})),label:"Área psicológica"},null,8,["modelValue","options"])]),l("div",Oe,[o(k,{modelValue:a.f.trabajo_social_user_id,"onUpdate:modelValue":e[20]||(e[20]=i=>a.f.trabajo_social_user_id=i),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:a.sociales.map(i=>({label:i.name,value:i.id})),label:"Área social"},null,8,["modelValue","options"])]),l("div",Re,[o(k,{modelValue:a.f.legal_user_id,"onUpdate:modelValue":e[21]||(e[21]=i=>a.f.legal_user_id=i),dense:"",outlined:"","emit-value":"","map-options":"",clearable:"",options:a.abogados.map(i=>({label:i.name,value:i.id})),label:"Área legal"},null,8,["modelValue","options"])])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card q-mb-xl"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"inventory_2",class:"q-mr-sm"}),e[34]||(e[34]=l("div",{class:"text-subtitle1 text-weight-medium"},"6) Check documentos adjuntos",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",Te,[l("div",Ee,[o(A,{modelValue:a.f.documento_fotocopia_carnet_denunciante,"onUpdate:modelValue":e[22]||(e[22]=i=>a.f.documento_fotocopia_carnet_denunciante=i),"true-value":"1","false-value":"0",label:"Fotocopia CI denunciante"},null,8,["modelValue"])]),l("div",Be,[o(A,{modelValue:a.f.documento_fotocopia_carnet_denunciado,"onUpdate:modelValue":e[23]||(e[23]=i=>a.f.documento_fotocopia_carnet_denunciado=i),"true-value":"1","false-value":"0",label:"Fotocopia CI denunciado"},null,8,["modelValue"])]),l("div",Ge,[o(A,{modelValue:a.f.documento_placas_fotograficas_domicilio_denunciante,"onUpdate:modelValue":e[24]||(e[24]=i=>a.f.documento_placas_fotograficas_domicilio_denunciante=i),"true-value":"1","false-value":"0",label:"Placas fotográficas denunciante"},null,8,["modelValue"])]),l("div",Ye,[o(A,{modelValue:a.f.documento_placas_fotograficas_domicilio_denunciado,"onUpdate:modelValue":e[25]||(e[25]=i=>a.f.documento_placas_fotograficas_domicilio_denunciado=i),"true-value":"1","false-value":"0",label:"Placas fotográficas denunciado"},null,8,["modelValue"])])])]),_:1})]),_:1}),l("div",Ze,[o(b,{flat:"",color:"primary",icon:"history",label:"Limpiar",onClick:d.resetForm,class:"q-mr-sm"},null,8,["onClick"]),f.editable?(m(),w(b,{key:1,color:"primary",icon:"save",label:"Actualizar",loading:a.loading,onClick:d.update},null,8,["loading","onClick"])):(m(),w(b,{key:0,color:"primary",icon:"save",label:"Guardar",loading:a.loading,onClick:d.save},null,8,["loading","onClick"]))])]),_:1},8,["onSubmit"])):(m(),g(S,{key:1},[o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center q-col-gutter-sm"},{default:s(()=>[l("div",He,[l("div",Je,[e[35]||(e[35]=r(" Detalle SLAM · Caso ")),a.f.caso_numero?(m(),g("span",Ke,"#"+c(a.f.caso_numero),1)):(m(),g("span",We,"#"+c(a.f.id),1))]),l("div",Xe,[e[36]||(e[36]=r(" Apertura: ")),o(V,{dense:"",color:"indigo-1","text-color":"indigo-9"},{default:s(()=>[r(c(d.fmtDate(a.f.fecha_apertura_caso)||"—"),1)]),_:1}),e[37]||(e[37]=r(" · Registrado por: ")),o(V,{dense:"",color:"grey-2","text-color":"grey-9"},{default:s(()=>[r(c(a.f.user?.name||"—"),1)]),_:1})])]),l("div",$e,[o(V,{dense:"",outline:"",color:"primary","text-color":"primary"},{default:s(()=>[r("Tipo: "+c(d.show(a.f.tipo||"SLAM")),1)]),_:1}),o(V,{dense:"",outline:"",color:"teal","text-color":"teal"},{default:s(()=>[r("Área: "+c(d.show(a.f.area)),1)]),_:1}),o(V,{dense:"",outline:"",color:"orange","text-color":"orange"},{default:s(()=>[r("Zona: "+c(d.show(a.f.zona||a.f.caso_zona)),1)]),_:1})])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"description",class:"q-mr-sm"}),e[38]||(e[38]=l("div",{class:"text-subtitle1 text-weight-medium"},"1) Datos del caso",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",eo,[l("div",oo,[e[39]||(e[39]=l("div",{class:"text-caption text-grey-7"},"N° Apoyo Integral",-1)),l("div",lo,c(d.show(a.f.numero_apoyo_integral)),1)]),l("div",ao,[e[40]||(e[40]=l("div",{class:"text-caption text-grey-7"},"N° Caso",-1)),l("div",io,c(d.show(a.f.caso_numero)),1)]),l("div",so,[e[41]||(e[41]=l("div",{class:"text-caption text-grey-7"},"Fecha de registro",-1)),l("div",no,c(d.fmtDate(a.f.caso_fecha_hecho)||"—"),1)]),l("div",to,[e[42]||(e[42]=l("div",{class:"text-caption text-grey-7"},"Lugar del hecho",-1)),l("div",co,c(d.show(a.f.caso_lugar_hecho)),1)]),l("div",uo,[e[43]||(e[43]=l("div",{class:"text-caption text-grey-7"},"Tipología",-1)),l("div",ro,c(d.show(a.f.caso_tipologia)),1)]),l("div",_o,[e[44]||(e[44]=l("div",{class:"text-caption text-grey-7"},"Modalidad",-1)),l("div",mo,c(d.show(a.f.caso_modalidad)),1)]),l("div",fo,[e[45]||(e[45]=l("div",{class:"text-caption text-grey-7"},"Dirección / Zona",-1)),l("div",po,[r(c(d.show(a.f.caso_direccion))+" ",1),a.f.caso_direccion&&(a.f.caso_zona||a.f.zona)?(m(),g("span",go,"·")):x("",!0),r(" "+c(d.show(a.f.caso_zona||a.f.zona)),1)])]),l("div",vo,[e[46]||(e[46]=l("div",{class:"text-caption text-grey-7 q-mb-xs"},"Descripción",-1)),l("div",bo,c(d.show(a.f.caso_descripcion)),1)])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"warning_amber",class:"q-mr-sm"}),e[47]||(e[47]=l("div",{class:"text-subtitle1 text-weight-medium"},"2) Tipos / Violencias",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",ho,[l("div",Vo,[o(V,{color:a.f.violencia_fisica?"negative":"grey-3","text-color":a.f.violencia_fisica?"white":"grey-8",dense:""},{default:s(()=>[r(" Física: "+c(d.yesNo(a.f.violencia_fisica)),1)]),_:1},8,["color","text-color"])]),l("div",yo,[o(V,{color:a.f.violencia_psicologica?"negative":"grey-3","text-color":a.f.violencia_psicologica?"white":"grey-8",dense:""},{default:s(()=>[r(" Psicológica: "+c(d.yesNo(a.f.violencia_psicologica)),1)]),_:1},8,["color","text-color"])]),l("div",xo,[o(V,{color:a.f.violencia_sexual?"negative":"grey-3","text-color":a.f.violencia_sexual?"white":"grey-8",dense:""},{default:s(()=>[r(" Sexual: "+c(d.yesNo(a.f.violencia_sexual)),1)]),_:1},8,["color","text-color"])]),l("div",wo,[o(V,{color:a.f.violencia_economica?"negative":"grey-3","text-color":a.f.violencia_economica?"white":"grey-8",dense:""},{default:s(()=>[r(" Económica/Patrimonial: "+c(d.yesNo(a.f.violencia_economica)),1)]),_:1},8,["color","text-color"])])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"people_alt",class:"q-mr-sm"}),e[48]||(e[48]=l("div",{class:"text-subtitle1 text-weight-medium"},"3) Responsables",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",Uo,[l("div",Co,[e[49]||(e[49]=l("div",{class:"text-caption text-grey-7"},"Área Psicológica",-1)),l("div",qo,[r(c(a.f.psicologica_user?.name||"—")+" ",1),a.f.psicologica_user?.celular?(m(),w(V,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[r(c(a.f.psicologica_user?.celular),1)]),_:1})):x("",!0)])]),l("div",ko,[e[50]||(e[50]=l("div",{class:"text-caption text-grey-7"},"Trabajo Social",-1)),l("div",Ao,[r(c(a.f.trabajo_social_user?.name||"—")+" ",1),a.f.trabajo_social_user?.celular?(m(),w(V,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[r(c(a.f.trabajo_social_user?.celular),1)]),_:1})):x("",!0)])]),l("div",So,[e[51]||(e[51]=l("div",{class:"text-caption text-grey-7"},"Área Legal",-1)),l("div",No,[r(c(a.f.legal_user?.name||"—")+" ",1),a.f.legal_user?.celular?(m(),w(V,{key:0,dense:"",color:"blue-1","text-color":"blue-9",class:"q-ml-xs"},{default:s(()=>[r(c(a.f.legal_user?.celular),1)]),_:1})):x("",!0)])])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"event",class:"q-mr-sm"}),e[52]||(e[52]=l("div",{class:"text-subtitle1 text-weight-medium"},"4) Fechas clave",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",Do,[l("div",Mo,[e[53]||(e[53]=l("div",{class:"text-caption text-grey-7"},"Apertura",-1)),l("div",Io,c(d.fmtDate(a.f.fecha_apertura_caso)||"—"),1)]),l("div",Qo,[e[54]||(e[54]=l("div",{class:"text-caption text-grey-7"},"Derivación Psicológica",-1)),l("div",Lo,c(d.fmtDate(a.f.fecha_derivacion_psicologica)||"—"),1)]),l("div",Fo,[e[55]||(e[55]=l("div",{class:"text-caption text-grey-7"},"Informe Psicología",-1)),l("div",Po,c(d.fmtDate(a.f.fecha_informe_area_psicologica)||"—"),1)]),l("div",jo,[e[56]||(e[56]=l("div",{class:"text-caption text-grey-7"},"Informe Social",-1)),l("div",zo,c(d.fmtDate(a.f.fecha_informe_area_social)||"—"),1)]),l("div",Oo,[e[57]||(e[57]=l("div",{class:"text-caption text-grey-7"},"Informe Trabajo Social",-1)),l("div",Ro,c(d.fmtDate(a.f.fecha_informe_trabajo_social)||"—"),1)]),l("div",To,[e[58]||(e[58]=l("div",{class:"text-caption text-grey-7"},"Derivación Legal",-1)),l("div",Eo,c(d.fmtDate(a.f.fecha_derivacion_area_legal)||"—"),1)])])]),_:1})]),_:1}),o(h,{flat:"",bordered:"",class:"section-card q-mb-xl"},{default:s(()=>[o(_,{class:"row items-center"},{default:s(()=>[o(p,{name:"inventory_2",class:"q-mr-sm"}),e[59]||(e[59]=l("div",{class:"text-subtitle1 text-weight-medium"},"5) Documentación (checks)",-1))]),_:1}),o(v),o(_,null,{default:s(()=>[l("div",Bo,[l("div",Go,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_fotocopia_carnet_denunciante==="1"?"check_circle":"cancel",color:a.f.documento_fotocopia_carnet_denunciante==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[60]||(e[60]=[r("Fotocopia CI denunciante")])),_:1})]),_:1})]),l("div",Yo,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_fotocopia_carnet_denunciado==="1"?"check_circle":"cancel",color:a.f.documento_fotocopia_carnet_denunciado==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[61]||(e[61]=[r("Fotocopia CI denunciado")])),_:1})]),_:1})]),l("div",Zo,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_placas_fotograficas_domicilio_denunciante==="1"?"check_circle":"cancel",color:a.f.documento_placas_fotograficas_domicilio_denunciante==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[62]||(e[62]=[r("Placas dom. denunciante")])),_:1})]),_:1})]),l("div",Ho,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_placas_fotograficas_domicilio_denunciado==="1"?"check_circle":"cancel",color:a.f.documento_placas_fotograficas_domicilio_denunciado==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[63]||(e[63]=[r("Placas dom. denunciado")])),_:1})]),_:1})]),a.f.documento_croquis_direccion_denunciado!==void 0?(m(),g("div",Jo,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_croquis_direccion_denunciado==="1"?"check_circle":"cancel",color:a.f.documento_croquis_direccion_denunciado==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[64]||(e[64]=[r("Croquis dirección denunciado")])),_:1})]),_:1})])):x("",!0),a.f.documento_ciudadania_digital!==void 0?(m(),g("div",Ko,[o(C,{dense:""},{default:s(()=>[o(y,{avatar:""},{default:s(()=>[o(p,{name:a.f.documento_ciudadania_digital==="1"?"check_circle":"cancel",color:a.f.documento_ciudadania_digital==="1"?"positive":"grey-5"},null,8,["name","color"])]),_:1}),o(y,null,{default:s(()=>e[65]||(e[65]=[r("Ciudadanía digital")])),_:1})]),_:1})])):x("",!0)])]),_:1})]),_:1})],64))]),_:1})}const sl=Q(O,[["render",Wo],["__scopeId","data-v-4f9cf771"]]);export{sl as S};
